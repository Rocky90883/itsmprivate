{"version":3,"sources":["webpack:///./src/views/itOperations/changeManagement/index.vue?d367","webpack:///./src/views/itOperations/changeManagement/add.vue?8a00","webpack:///./src/api/itOperations/changeManagement.js","webpack:///src/views/itOperations/changeManagement/add.vue","webpack:///./src/views/itOperations/changeManagement/add.vue?e281","webpack:///./src/views/itOperations/changeManagement/add.vue","webpack:///./src/views/itOperations/changeManagement/distributionDialog.vue?f1c4","webpack:///src/views/itOperations/changeManagement/distributionDialog.vue","webpack:///./src/views/itOperations/changeManagement/distributionDialog.vue?4b7a","webpack:///./src/views/itOperations/changeManagement/distributionDialog.vue","webpack:///src/views/itOperations/changeManagement/index.vue","webpack:///./src/views/itOperations/changeManagement/index.vue?ca4c","webpack:///./src/views/itOperations/changeManagement/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","pageType","_b","ref","tableConfig","_e","attrs","rightBtnArr","on","goBackPage","formData","$event","distributionDialog","distributionSubmit","distributionData","staticRenderFns","formConfig","editFormData","scopedSlots","_u","key","fn","editFormInfo","isWorkFlowEdit","model","value","callback","$$v","$set","expression","stopPropagation","getServiceType","slot","status","scoreSetting","scoreHideBtn","showScore","attachSetting","hideBtn","beforeSubmit","workFlowParams","workFlowSuccess","hadSeleteData","showSelete","employeeId","changeServiceType","getListApi","data","request","url","method","getDetailsApi","id","params","deleteModify","addModify","updateModify","props","type","Object","default","String","defaultSet","Boolean","trainingType","itemArr","procInstType","title","select","billType","sourceId","btnArr","coverList","dialogVisible","activeName","methods","computed","workflowIsApprover","assignercodes","confirmMan","mounted","init","defaultForm","assign","billDate","$utils","getNowDay","getDetails","map","submitBefore","Promise","$emit","getFormData","$refs","editForm","console","log","list","setFormItem","orderNo","component","maxNum","Number","name","watch","handler","newV","deep","created","components","label","otherInfo","currentItem","showFixedHeight","searchObj","searchMethod","searchArr","queryObj","queryData","page","pageSize","tableDataObj","tableArr","total","operateArr","tableObj","selectionShow","indexShow","tableMethods","selection","showItems","paginationObj","pageSizes","paginationIsshow","showklTable","arr","val","empId","getTableData","toAdd","form","pageCount","beginDate","endDate","$delete","addDistribution","addPortion","detailsInfo","row","editInfo","score","distributionFrom"],"mappings":"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","file":"js/chunk-2d217ae8.5760770d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"changeManagement h100\"},[_c('div',{staticClass:\"page-main-box\"},[(_vm.pageType == 'list')?_c('KlTable',_vm._b({ref:\"klTable\"},'KlTable',_vm.tableConfig,false)):_vm._e(),(_vm.pageType !== 'list')?_c('editPage',{attrs:{\"rightBtnArr\":_vm.rightBtnArr},on:{\"goBackPage\":_vm.goBackPage}},[_c('addInfo',{ref:\"editForm\",attrs:{\"pageType\":_vm.pageType,\"formData\":_vm.formData},on:{\"update:pageType\":function($event){_vm.pageType=$event},\"update:page-type\":function($event){_vm.pageType=$event}}})],1):_vm._e()],1),_c('dialogPublic',{attrs:{\"title\":'变更管理-分配',\"show\":_vm.distributionDialog,\"appendTobody\":\"\",\"width\":\"800px\",\"height\":\"400px\"},on:{\"update:show\":function($event){_vm.distributionDialog=$event},\"doSubmit\":_vm.distributionSubmit,\"doClose\":function () { return (_vm.distributionDialog = false); }}},[_c('distributionDialog',{ref:\"distributionFrom\",attrs:{\"distributionData\":_vm.distributionData}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"record__content\"},[_c('div',{staticClass:\"record__baseinfo\"},[_c('dividerTitle',{attrs:{\"title\":'基本信息'}}),_c('editForm',{ref:\"editForm\",attrs:{\"formConfig\":_vm.formConfig,\"formData\":_vm.editFormData},scopedSlots:_vm._u([{key:\"serviceOrderNo\",fn:function(ref){\nvar editFormInfo = ref.editFormInfo;\nreturn [_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"请选择服务工单号\",\"readonly\":\"\",\"disabled\":_vm.pageType == 'details' && !_vm.isWorkFlowEdit,\"size\":\"mini\"},model:{value:(editFormInfo.serviceOrderNo),callback:function ($$v) {_vm.$set(editFormInfo, \"serviceOrderNo\", $$v)},expression:\"editFormInfo.serviceOrderNo\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.getServiceType($event)}},slot:\"append\"})],1)]}}])})],1),(_vm.editFormData.status && _vm.editFormData.status == 1)?_c('div',{staticClass:\"process_score\"},[_c('dividerTitle',{attrs:{\"title\":'评分'}}),(_vm.showScore)?_c('processScore',{attrs:{\"scoreSetting\":_vm.scoreSetting,\"hideBtn\":_vm.scoreHideBtn,\"showScore\":_vm.showScore},on:{\"update:showScore\":function($event){_vm.showScore=$event},\"update:show-score\":function($event){_vm.showScore=$event}}}):_vm._e()],1):_vm._e(),_c('div',{staticClass:\"record__attach\"},[_c('dividerTitle',{attrs:{\"title\":'附件'}}),_c('attachTable',{ref:\"attachFile\",attrs:{\"attachSetting\":_vm.attachSetting,\"hideBtn\":_vm.hideBtn}})],1),(\n      _vm.pageType == 'details' &&\n        _vm.editFormData.status &&\n        _vm.editFormData.status !== 2\n    )?_c('div',{staticClass:\"record__workflow\"},[_c('dividerTitle',{attrs:{\"title\":'工作流'}}),_c('workFlow',{attrs:{\"currentFlowData\":_vm.editFormData,\"beforeSubmit\":_vm.beforeSubmit,\"otherParams\":_vm.workFlowParams},on:{\"submitSuccess\":_vm.workFlowSuccess}})],1):_vm._e(),(_vm.showSelete)?_c('serviceNumberSelect',{attrs:{\"hadSeleteData\":_vm.hadSeleteData,\"showSelete\":_vm.showSelete,\"userID\":_vm.employeeId},on:{\"changeSelete\":_vm.changeServiceType,\"update:showSelete\":function($event){_vm.showSelete=$event},\"update:show-selete\":function($event){_vm.showSelete=$event}}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/request/api'\r\n/**===========基本信息接口 */\r\n//列表\r\nexport function getListApi(data = {}) {\r\n    return request({\r\n        url: '/maintain/MtModifyAction/queryList.htm',\r\n        method: 'post',\r\n        data: data\r\n    })\r\n}\r\n//详情\r\nexport function getDetailsApi(id = \"\") {\r\n    return request({\r\n        url: '/maintain/MtModifyAction/detail.htm',\r\n        method: 'post',\r\n        params:{ id: id }\r\n    })\r\n}\r\n\r\n//删除\r\nexport function deleteModify(id = \"\") {\r\n    return request({\r\n        url: '/maintain/MtModifyAction/delete.htm',\r\n        method: 'post',\r\n        params: { id: id\r\n         }\r\n    })\r\n}\r\n//添加\r\nexport function addModify(data = {}) {\r\n    return request({\r\n        url: '/maintain/MtModifyAction/addMtModify.htm',\r\n        method: 'post',\r\n        data: data\r\n    })\r\n}\r\n//保存草稿\r\nexport function updateModify(data = {}) {\r\n    return request({\r\n        url: '/maintain/MtModifyAction/updateMtModify.htm',\r\n        method: 'post',\r\n        data: data\r\n    })\r\n}\r\n\r\n\r\n","<template>\r\n  <div class=\"record__content\">\r\n    <div class=\"record__baseinfo\">\r\n      <dividerTitle :title=\"'基本信息'\"></dividerTitle>\r\n      <editForm\r\n        :formConfig=\"formConfig\"\r\n        ref=\"editForm\"\r\n        :formData=\"editFormData\"\r\n      >\r\n        <template #serviceOrderNo=\"{editFormInfo}\">\r\n          <el-input\r\n            placeholder=\"请选择服务工单号\"\r\n            v-model=\"editFormInfo.serviceOrderNo\"\r\n            readonly\r\n            :disabled=\"pageType == 'details' && !isWorkFlowEdit\"\r\n            size=\"mini\"\r\n            class=\"input-with-select\"\r\n          >\r\n            <el-button\r\n              slot=\"append\"\r\n              icon=\"el-icon-search\"\r\n              @click.stop=\"getServiceType\"\r\n            ></el-button>\r\n          </el-input>\r\n        </template>\r\n      </editForm>\r\n    </div>\r\n    <div\r\n      class=\"process_score\"\r\n      v-if=\"editFormData.status && editFormData.status == 1\"\r\n    >\r\n      <dividerTitle :title=\"'评分'\"></dividerTitle>\r\n      <processScore\r\n        v-if=\"showScore\"\r\n        :scoreSetting=\"scoreSetting\"\r\n        :hideBtn=\"scoreHideBtn\"\r\n        :showScore.sync=\"showScore\"\r\n      ></processScore>\r\n    </div>\r\n    <div class=\"record__attach\">\r\n      <dividerTitle :title=\"'附件'\"></dividerTitle>\r\n      <attachTable\r\n        :attachSetting=\"attachSetting\"\r\n        :hideBtn=\"hideBtn\"\r\n        ref=\"attachFile\"\r\n      ></attachTable>\r\n    </div>\r\n\r\n    <div\r\n      class=\"record__workflow\"\r\n      v-if=\"\r\n        pageType == 'details' &&\r\n          editFormData.status &&\r\n          editFormData.status !== 2\r\n      \"\r\n    >\r\n      <dividerTitle :title=\"'工作流'\"></dividerTitle>\r\n      <workFlow\r\n        :currentFlowData=\"editFormData\"\r\n        :beforeSubmit=\"beforeSubmit\"\r\n        :otherParams=\"workFlowParams\"\r\n        @submitSuccess=\"workFlowSuccess\"\r\n      ></workFlow>\r\n    </div>\r\n    <serviceNumberSelect\r\n      v-if=\"showSelete\"\r\n      :hadSeleteData=\"hadSeleteData\"\r\n      @changeSelete=\"changeServiceType\"\r\n      :showSelete.sync=\"showSelete\"\r\n      :userID=\"employeeId\"\r\n    ></serviceNumberSelect>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getDetailsApi, //获取详情\r\n  updateModify\r\n} from \"@/api/itOperations/changeManagement\";\r\n\r\nexport default {\r\n  props: {\r\n    formData: {\r\n      type: Object,\r\n      default: new Object()\r\n    },\r\n    pageType: {\r\n      type: String,\r\n      default: \"\"\r\n    },\r\n    defaultSet: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      // userInfo: this.$store.getters.userInfo,\r\n      hadSeleteData: [],\r\n      employeeId: null,\r\n      showSelete: false,\r\n      editFormData: { suitableWorkArr: [] },\r\n      trainingType: {},\r\n      formConfig: {\r\n        itemArr: [\r\n          {\r\n            label: \"申请日期\",\r\n            prop: \"billDate\",\r\n            type: \"date\",\r\n            required: true,\r\n            span: 8\r\n          },\r\n          {\r\n            label: \"申请人\",\r\n            prop: \"staffunName\",\r\n            idsStr: \"employeeId\",\r\n            type: \"user\",\r\n            trigger: \"change\",\r\n            required: true,\r\n            methods: obj => {\r\n              let { orgNodeName, orgNodeCode, mobile, id } = obj[0];\r\n              this.employeeId = id;\r\n              this.$refs.editForm.setFormItem(\"depatName\", orgNodeName);\r\n              this.$refs.editForm.setFormItem(\"depatCode\", orgNodeCode);\r\n              this.$refs.editForm.setFormItem(\"phone\", mobile);\r\n            }\r\n          },\r\n          {\r\n            type: \"select\",\r\n            label: \"影响范围\",\r\n            prop: \"affectType\",\r\n            required: true,\r\n            seleteOption: this.$store.getters[\"dirtData\"](\"affect_type\"),\r\n            formatter: val => {\r\n              return this.$store.getters[\"fineDirtDataName\"](\r\n                \"affect_type\",\r\n                val\r\n              );\r\n            }\r\n          },\r\n\r\n          {\r\n            label: \"服务工单号\",\r\n            prop: \"serviceOrderNo\",\r\n            idsStr: \"serviceId\", //服务工单id\r\n            type: \"text\"\r\n            // required: true\r\n          },\r\n          {\r\n            label: \"服务类型\",\r\n            prop: \"serviceType\",\r\n            type: \"text\",\r\n            placeholder: \"选择服务工单号后自动填入\",\r\n            disabled: true\r\n            // required: true\r\n          },\r\n\r\n          {\r\n            type: \"input\",\r\n            label: \"项目名称\",\r\n            prop: \"projectName\",\r\n            placeholder: \"请输入项目名称\"\r\n          },\r\n          {\r\n            type: \"select\",\r\n            label: \"应用系统名称\",\r\n            prop: \"appsysName\",\r\n            id: \"appsysId\",\r\n            placeholder: \"请选择应用系统名称\",\r\n            // required: true,\r\n            seleteOption: this.$store.getters.systemType,\r\n            methods: obj => {\r\n              // console.log(obj);\r\n              this.$refs.editForm.setFormItem(\"appsysId\", obj.value);\r\n              this.$refs.editForm.setFormItem(\"appsysName\", obj.name);\r\n            }\r\n          },\r\n          {\r\n            label: \"责任人\",\r\n            prop: \"assignName\",\r\n            idsStr: \"assignEmpid\",\r\n            type: \"user\",\r\n            isHide: !this.isWorkFlowEdit,\r\n            required: true,\r\n            trigger: \"change\"\r\n          },\r\n\r\n          {\r\n            label: \"影响概述\",\r\n            prop: \"affectContent\",\r\n            type: \"textarea\",\r\n            span: 24,\r\n            rows: 4\r\n          },\r\n          {\r\n            label: \"变更描述\",\r\n            prop: \"appContent\",\r\n            type: \"textarea\",\r\n            span: 24,\r\n            rows: 4\r\n          }\r\n          // {\r\n          //   label: \"备注\",\r\n          //   prop: \"remark\",\r\n          //   type: \"textarea\",\r\n          //   span: 24,\r\n          //   rows: 4\r\n          // }\r\n        ]\r\n      },\r\n      procInstType: null,\r\n      //附件设置\r\n      attachSetting: {\r\n        title: \"\",\r\n        select: false,\r\n        billType: this.procInstType, //页面标识\r\n        sourceId: \"\", //单据的ID\r\n        btnArr: [\"add\", \"delete\", \"save\"]\r\n      },\r\n      //评分设置\r\n      scoreSetting: {\r\n        title: \"\",\r\n        billType: this.procInstType, //页面标识\r\n        sourceId: \"\", //单据的ID\r\n        data: [],\r\n        btnArr: [\"save\"]\r\n      },\r\n      scoreHideBtn: false,\r\n      coverList: [],\r\n      dialogVisible: false,\r\n      activeName: \"0\",\r\n      hideBtn: false,\r\n      showScore: false,\r\n      beforeSubmit: {\r\n        //工作流提交前检测\r\n        methods: data => {\r\n          return this.submitBefore(data);\r\n        }\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    //工作流额外参数\r\n    workFlowParams() {\r\n      let { procInstType } = this.editFormData;\r\n      if (this.formData.status === 4 && this.formData.workflowIsApprover) {\r\n        return {\r\n          procInstType: procInstType || \"\",\r\n          assignercodes: [this.editFormData.confirmMan]\r\n        };\r\n      }\r\n      return { procInstType: procInstType || \"\" };\r\n    },\r\n    //是否是流程中可编辑\r\n    isWorkFlowEdit() {\r\n      if (this.formData.status === 4 && this.formData.workflowIsApprover) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      //row.status\r\n      if (this.pageType == \"add\") {\r\n        let defaultForm = {};\r\n        if (this.defaultSet) {\r\n          defaultForm = { ...this.formData };\r\n        }\r\n        this.editFormData = Object.assign({}, defaultForm, {\r\n          billDate: this.$utils.getNowDay()\r\n        });\r\n      } else {\r\n        this.getDetails(this.formData.id);\r\n      }\r\n      if (this.pageType == \"details\") {\r\n        if (!this.isWorkFlowEdit) {\r\n          this.formConfig.itemArr.map(i => (i.disabled = true));\r\n        }\r\n        this.attachSetting.sourceId = this.formData.id; //附件id\r\n      }\r\n      if (this.pageType == \"score\") {\r\n        //评分\r\n        this.scoreSetting.sourceId = this.formData.id;\r\n        this.formConfig.itemArr.map(i => (i.disabled = true));\r\n        this.showScore = true; //显示评分\r\n      }\r\n      // console.log(this.$store.getters.userInfo);\r\n    },\r\n\r\n    //获取详情\r\n    async getDetails(id) {\r\n      let res = await getDetailsApi(id);\r\n      let obj = res.data || {};\r\n      // console.log(res.data );\r\n      this.procInstType = obj.procInstType; //附件页面标识\r\n      this.attachSetting.sourceId = obj.id; //附件对应的流程ID，新建流程保存后即可添加附件\r\n      this.editFormData = Object.assign({}, obj, {\r\n        confirmMan: obj.empId,\r\n        confirmManName: obj.zystaffunName\r\n      });\r\n    },\r\n    //提交前检测\r\n    submitBefore(data) {\r\n      //如果是起草节点\r\n      if (this.isWorkFlowEdit) {\r\n        return new Promise((resolve, reject) => {\r\n          this.$refs.editForm\r\n            .getFormData()\r\n            .then(data => {\r\n              this.$set(data, \"submitType\", 1);\r\n\r\n              this.editFormData = Object.assign({}, data);\r\n\r\n              updateModify(data)\r\n                .then(res => {\r\n                  resolve();\r\n                })\r\n                .catch(e => {\r\n                  reject(e);\r\n                });\r\n            })\r\n            .catch(e => {\r\n              reject(\"表单信息未填写完整\");\r\n            });\r\n        });\r\n      } else {\r\n        return true;\r\n      }\r\n    },\r\n    //工作流提交成功之后\r\n    workFlowSuccess() {\r\n      this.$emit(\"update:pageType\", \"list\");\r\n    },\r\n    //获取表单数据\r\n    getFormData() {\r\n      return this.$refs.editForm.getFormData();\r\n    },\r\n    //点击选择服务工单号\r\n    getServiceType() {\r\n      // console.log(\"diaoyong\");\r\n      if (this.pageType == \"details\") {\r\n        return;\r\n      }\r\n      let sourceId = this.$refs.editForm.getFormItem(\"sourceId\");\r\n      this.hadSeleteData = [{ id: sourceId }];\r\n\r\n      this.showSelete = true;\r\n    },\r\n    //确定选择服务工单号\r\n    changeServiceType(list) {\r\n      console.log(list);\r\n      let [obj] = list;\r\n      let { id, orderNo, procInstType } = obj; //assetsNumber\r\n      this.$refs.editForm.setFormItem(\"serviceOrderNo\", orderNo); //服务工单号\r\n      this.$refs.editForm.setFormItem(\"serviceId\", id); //服务工单ID\r\n      this.$refs.editForm.setFormItem(\"serviceType\", procInstType); //服务类型\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./add.vue?vue&type=template&id=3b6b0266&scoped=true&\"\nimport script from \"./add.vue?vue&type=script&lang=js&\"\nexport * from \"./add.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3b6b0266\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"distributionDialog\"},[_c('editForm',{ref:\"editForm\",attrs:{\"formConfig\":_vm.formConfig,\"formData\":_vm.editFormData}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"distributionDialog\">\r\n    <editForm :formConfig=\"formConfig\" ref=\"editForm\" :formData=\"editFormData\">\r\n    </editForm>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    distributionData: {\r\n      type: Object,\r\n      default: {}\r\n    },\r\n    maxNum: {\r\n      type: Number,\r\n      default: 0\r\n    }\r\n  },\r\n  name: \"distributionDialog\",\r\n  data() {\r\n    return {\r\n      editFormData: {},\r\n      formConfig: {\r\n        itemArr: [\r\n          {\r\n            label: \"申请日期\",\r\n            prop: \"billDate\",\r\n            type: \"date\",\r\n            disabled: true,\r\n            required: true,\r\n            span: 24\r\n          },\r\n          {\r\n            label: \"申请人\",\r\n            prop: \"staffunName\",\r\n            required: true,\r\n            disabled: true,\r\n            type: \"text\",\r\n            span: 24\r\n          },\r\n          {\r\n            label: \"责任人\",\r\n            prop: \"assignName\",\r\n            idsStr: \"assignEmpid\",\r\n            type: \"user\",\r\n            trigger: \"change\",\r\n            required: true,\r\n            span: 24\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  watch: {\r\n    distributionData: {\r\n      handler: function(newV,oldV) {\r\n        this.editFormData = Object.assign({}, newV);\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  created() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.editFormData = Object.assign({}, this.distributionData);\r\n    },\r\n    //获取表单数据\r\n    getFormData() {\r\n      let This = this;\r\n      return new Promise((resolve, reject) => {\r\n        this.$refs.editForm\r\n          .getFormData()\r\n          .then(data => {\r\n            data = Object.assign({}, data);\r\n            resolve(data);\r\n          })\r\n          .catch(e => {\r\n            reject(e);\r\n          });\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./distributionDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./distributionDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./distributionDialog.vue?vue&type=template&id=399e663b&\"\nimport script from \"./distributionDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./distributionDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"changeManagement h100\">\r\n    <!-- <publicCrumbs :crumbsData=\"crumbsData\"></publicCrumbs> -->\r\n    <div class=\"page-main-box\">\r\n      <KlTable\r\n        v-bind=\"tableConfig\"\r\n        v-if=\"pageType == 'list'\"\r\n        ref=\"klTable\"\r\n      ></KlTable>\r\n      <editPage\r\n        v-if=\"pageType !== 'list'\"\r\n        @goBackPage=\"goBackPage\"\r\n        :rightBtnArr=\"rightBtnArr\"\r\n      >\r\n        <addInfo\r\n          ref=\"editForm\"\r\n          :pageType.sync=\"pageType\"\r\n          :formData=\"formData\"\r\n        ></addInfo>\r\n      </editPage>\r\n    </div>\r\n    <dialogPublic\r\n      :title=\"'变更管理-分配'\"\r\n      :show.sync=\"distributionDialog\"\r\n      @doSubmit=\"distributionSubmit\"\r\n      @doClose=\"() => (distributionDialog = false)\"\r\n      appendTobody\r\n      width=\"800px\"\r\n      height=\"400px\"\r\n    >\r\n      <distributionDialog\r\n        :distributionData=\"distributionData\"\r\n        ref=\"distributionFrom\"\r\n      >\r\n      </distributionDialog>\r\n    </dialogPublic>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport addInfo from \"./add\";\r\nimport distributionDialog from \"./distributionDialog\";\r\n\r\nimport {\r\n  getListApi, //获取列表\r\n  deleteModify, //删除\r\n  addModify, //添加\r\n  updateModify, //编辑\r\n} from \"@/api/itOperations/changeManagement\";\r\nimport { allocationEmp } from \"@/api/workFlow\";\r\nexport default {\r\n  name: \"changeManagement\",\r\n  components: { addInfo, distributionDialog },\r\n  data() {\r\n    return {\r\n      label: \"\",\r\n      otherInfo: \"\",\r\n      showScore: false,\r\n      distributionDialog: false,\r\n      distributionData: {},\r\n      currentItem: {},\r\n      tableConfig: {\r\n        showFixedHeight: true,\r\n        searchObj: {\r\n          searchMethod: (params, that) => {\r\n            if (this.tableConfig.tableDataObj) {\r\n              this.getTableData();\r\n            } else {\r\n            }\r\n          },\r\n          searchArr: [\r\n            {\r\n              type: \"el-input\",\r\n              label: \"变更单号\",\r\n              model: \"orderNo\",\r\n              placeholder: \"变更单号\",\r\n            },\r\n            {\r\n              type: \"daterange\",\r\n              label: \"申请日期\",\r\n              model: \"billDate\",\r\n            },\r\n            {\r\n              type: \"el-input\",\r\n              label: \"申请人\",\r\n              model: \"staffunName\",\r\n              placeholder: \"申请人\",\r\n            },\r\n            {\r\n              type: \"el-select\",\r\n              label: \"审核状态\",\r\n              model: \"status\",\r\n              placeholder: \"审核状态\",\r\n              option: this.$store.getters[\"dirtData\"](\"flow_type\")\r\n            },\r\n            {\r\n              type: \"el-input\",\r\n              label: \"关键字\",\r\n              model: \"fuzzyQuery\",\r\n              placeholder: \"关键字（项目名称、系统名称）\",\r\n            },\r\n          ],\r\n        },\r\n        // 查询条件参数\r\n        queryObj: {\r\n          method: () => {\r\n            this.getTableData();\r\n          },\r\n          queryData: {\r\n            page: 1,\r\n            pageSize: 15, //pageCount\r\n          },\r\n        },\r\n        tableDataObj: {\r\n          tableArr: [],\r\n          total: null,\r\n        },\r\n        operateArr: [\r\n          {\r\n            name: \"新建\",\r\n            // isHide: !this.$store.getters[\"isBtnAuth\"](\"insert\"),\r\n            icon: \"el-icon-plus\",\r\n            method: (name) => {\r\n              this.toAdd();\r\n            },\r\n          },\r\n          // {\r\n          //   name: \"导出\",\r\n          //   icon: \"el-icon-download\",\r\n          //   // isHide: !this.$store.getters[\"isBtnAuth\"](\"export\"),\r\n          //   method: name => {\r\n          //     this.toExport();\r\n          //   }\r\n          // }\r\n        ],\r\n        //  table表配置参数\r\n        tableObj: {\r\n          // 左边选择框展示\r\n          selectionShow: false,\r\n          // 左边序号展示\r\n          indexShow: true,\r\n          // table表事件参数配置\r\n          tableMethods: {\r\n            selection: (val) => {\r\n              this.selectionData = val;\r\n            },\r\n          },\r\n          // table表展示列配置\r\n          showItems: [\r\n            {\r\n              name: \"变更单号\",\r\n              prop: \"orderNo\",\r\n              width: 100,\r\n            },\r\n            {\r\n              name: \"申请日期\",\r\n              prop: \"billDate\",\r\n            },\r\n            {\r\n              name: \"申请人\",\r\n              prop: \"staffunName\",\r\n            },\r\n            {\r\n              name: \"项目名称\",\r\n              prop: \"projectName\",\r\n            },\r\n            {\r\n              name: \"应用系统名称\",\r\n              prop: \"appsysName\",\r\n              id: \"appsysId\",\r\n            },\r\n            {\r\n              name: \"变更描述\",\r\n              prop: \"appContent\",\r\n            },\r\n            // {\r\n            //   name: \"级别类型\", //level_type\r\n            //   prop: \"levelType\",\r\n            //   scopeType: \"formate\",\r\n            //   method: (row) => {\r\n            //     let value = row.levelType;\r\n            //     return (\r\n            //       this.$store.getters[\"fineDirtDataName\"](\r\n            //         \"level_type\",\r\n            //         value\r\n            //       ) || value\r\n            //     );\r\n            //   },\r\n            // },\r\n            // {\r\n            //   name: \"问题分类\", //pro_type\r\n            //   prop: \"proType\",\r\n            //   scopeType: \"formate\",\r\n            //   method: (row) => {\r\n            //     let value = row.proType;\r\n            //     return (\r\n            //       this.$store.getters[\"fineDirtDataName\"](\"pro_type\", value) ||\r\n            //       value\r\n            //     );\r\n            //   },\r\n            // },\r\n            {\r\n              name: \"责任人\",\r\n              prop: \"assignName\",\r\n              id: \"assignEmpid\",\r\n            },\r\n            {\r\n              name: \"备注\",\r\n              prop: \"remark\",\r\n            },\r\n            {\r\n              name: \"审批人\",\r\n              prop: \"auditorName\",\r\n              id: \"auditor\",\r\n            },\r\n            {\r\n              name: \"流程节点\",\r\n              prop: \"stage\",\r\n            },\r\n            {\r\n              name: \"流程状态\",\r\n              prop: \"flowStatusName\",\r\n              id: \"status\",\r\n            },\r\n            {\r\n              name: \"操作\",\r\n              prop: \"operate\",\r\n              width: 150,\r\n              scopeType: \"button\",\r\n              fixed: \"right\",\r\n              buttonArr: [\r\n                // 最后一行操作栏数组\r\n                {\r\n                  name: \"详情\",\r\n                  method: (row) => {\r\n                    this.detailsInfo(row);\r\n                  },\r\n                  isShow: (row, that) => {\r\n                    return true;\r\n                  },\r\n                  icon: \"false\",\r\n                },\r\n                {\r\n                  name: \"审批\",\r\n                  method: (row) => {\r\n                    //0不可以审核 1可审核\r\n                    this.detailsInfo(row);\r\n                  },\r\n                  isShow: (row, that) => {\r\n                    return row.workflowIsApprover;\r\n                  },\r\n                  icon: \"false\",\r\n                },\r\n                {\r\n                  name: \"编辑\",\r\n                  method: (row) => {\r\n                    this.editInfo(row);\r\n                  },\r\n                  isShow: (row, that) => {\r\n                    return row.status === 2;\r\n                  },\r\n                  icon: \"false\",\r\n                },\r\n                {\r\n                  name: \"评分\",\r\n                  method: (row) => {\r\n                    this.score(row);\r\n                  },\r\n                  isShow: (row, that) => {\r\n                    // return true;\r\n                    return row.status === 1;\r\n                  },\r\n                  icon: \"false\",\r\n                },\r\n                {\r\n                  name: \"分配\",\r\n                  method: (row) => {\r\n                    this.distributionData = row;\r\n                    this.distributionDialog = true;\r\n                  },\r\n                  isShow: (row, that) => {\r\n                    // return true;\r\n                    return row.status === 1;\r\n                  },\r\n                  icon: \"false\",\r\n                },\r\n                {\r\n                  name: \"删除\",\r\n                  method: (row) => {\r\n                    this.deleteInfo(row);\r\n                  },\r\n                  isShow: (row, that) => {\r\n                    // return true;\r\n                    return row.status === 2;\r\n                  },\r\n                  icon: \"false\",\r\n                },\r\n              ],\r\n            },\r\n          ],\r\n        },\r\n        // 分页展示总条配置\r\n        paginationObj: {\r\n          pageSizes: [15, 30, 50, 100],\r\n        },\r\n        paginationIsshow: true,\r\n        showklTable: false,\r\n      },\r\n      pageType: \"list\",\r\n      formData: {},\r\n    };\r\n  },\r\n  computed: {\r\n    rightBtnArr() {\r\n      let arr = [\r\n        {\r\n          text: \"保存\",\r\n          icon: \"el-icon-check\",\r\n          hide: this.pageType == \"details\",\r\n          methods: () => {\r\n            this.doSubmit(2);\r\n          },\r\n        },\r\n        {\r\n          text: \"提交\",\r\n          icon: \"el-icon-finished\",\r\n          hide: this.pageType == \"details\",\r\n          methods: () => {\r\n            this.doSubmit(1);\r\n          },\r\n        },\r\n      ];\r\n      return arr;\r\n    },\r\n  },\r\n  watch: {\r\n    // 对人员选择框做清空处理\r\n    \"tableConfig.queryObj.queryData.staffunName\"(val) {\r\n      if (val == \"\") {\r\n        this.tableConfig.queryObj.queryData.empId = null;\r\n      }\r\n    },\r\n    pageType(val) {\r\n      if (val === \"list\") {\r\n        this.getTableData();\r\n      }\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    this.getTableData();\r\n    // console.log(this.$store.getters.systemType);\r\n  },\r\n  methods: {\r\n    //新建\r\n    toAdd() {\r\n      this.pageType = \"add\";\r\n      this.formData = {};\r\n    },\r\n    //查询数据\r\n    getTableData() {\r\n      let form = Object.assign({}, this.tableConfig.queryObj.queryData);\r\n      form.pageCount = form.pageSize;\r\n      //日期处理\r\n      let { billDate } = form;\r\n      if (billDate) {\r\n        let [beginDate, endDate] = billDate;\r\n        form.beginDate = beginDate;\r\n        form.endDate = endDate;\r\n      }\r\n      this.$delete(form, \"billDate\");\r\n      this.$delete(form, \"pageSize\");\r\n      // this.$delete(data, \"phone\");\r\n      this.$delete(form, \"empId\");\r\n      getListApi(form)\r\n        .then((res) => {\r\n          this.$set(\r\n            this.tableConfig.tableDataObj,\r\n            \"tableArr\",\r\n            res.data.list || []\r\n          );\r\n          this.$set(\r\n            this.tableConfig.tableDataObj,\r\n            \"total\",\r\n            res.data.total || 0\r\n          );\r\n          // console.log(res.data.list);\r\n        })\r\n        .catch((res) => {\r\n          this.$set(this.tableConfig.tableDataObj, \"tableArr\", []);\r\n          this.$set(this.tableConfig.tableDataObj, \"total\", 0);\r\n        });\r\n    },\r\n    //分配\r\n    addDistribution(data) {\r\n      return new Promise((resolve, reject) => {\r\n        addPortion(data)\r\n          .then((res) => {\r\n            resolve(res);\r\n          })\r\n          .catch((e) => {\r\n            console.log(e);\r\n            reject(e);\r\n          });\r\n      });\r\n    },\r\n\r\n    //详情\r\n    detailsInfo(row) {\r\n      this.pageType = \"details\";\r\n      this.formData = Object.assign({}, row);\r\n    },\r\n    //编辑\r\n    editInfo(row) {\r\n      this.pageType = \"edit\";\r\n      this.formData = Object.assign({}, row);\r\n    },\r\n    // 评分\r\n    score(row) {\r\n      this.pageType = \"score\";\r\n      this.formData = Object.assign({}, row);\r\n    },\r\n    //分配弹框确定按钮\r\n    distributionSubmit() {\r\n      this.$refs.distributionFrom\r\n        .getFormData()\r\n        .then((data) => {\r\n          let { assignEmpid, procInstType, id } = data;\r\n          let form = {\r\n            assignEmpid: assignEmpid,\r\n            procInstType: procInstType,\r\n            id: id,\r\n          };\r\n          // console.log(form);\r\n          this.addDistribution(form).then((res) => {\r\n            this.$message.success(\"操作成功！\");\r\n            this.distributionDialog = false;\r\n            // this.pageType = \"list\";\r\n            this.getTableData();\r\n            // this.pageType = \"edit\";\r\n            // this.$refs.editForm.getDetails(this.formData.id);\r\n          });\r\n        })\r\n        .catch((e) => {\r\n          console.log(e);\r\n        });\r\n    },\r\n    addDistribution(data) {\r\n      return new Promise((resolve, reject) => {\r\n        allocationEmp(data)\r\n          .then((res) => {\r\n            resolve(res);\r\n          })\r\n          .catch((e) => {\r\n            console.log(e);\r\n            reject(e);\r\n          });\r\n      });\r\n    },\r\n    //删除\r\n    deleteInfo(row) {\r\n      this.$confirm(`是否确认删除`, \"提示\", {\r\n        // this.$confirm(`是否删除【${row.trainingName}】`, \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      })\r\n        .then(() => {\r\n          deleteModify(row.id).then((res) => {\r\n            this.$message.success(\"操作成功\");\r\n            this.getTableData();\r\n          });\r\n        })\r\n        .catch((e) => {});\r\n    },\r\n    //点击提交\r\n    doSubmit(submitType) {\r\n      this.$refs.editForm\r\n        .getFormData()\r\n        .then((data) => {\r\n          // console.log(data);\r\n          this.$set(data, \"submitType\", submitType);\r\n          // this.$delete(data, \"confirmManName\");\r\n          this.$delete(data, \"depatName\");\r\n          this.$delete(data, \"depatCode\");\r\n          this.$delete(data, \"phone\");\r\n          const actionApi = (queryData) => {\r\n            //addApi\r\n            return queryData.id\r\n              ? updateModify(queryData)\r\n              : addModify(queryData);\r\n          };\r\n\r\n          // console.log(data);\r\n          actionApi(data).then((res) => {\r\n            this.$message.success(\"操作成功！\");\r\n            if (submitType == 2) {\r\n              this.pageType = \"edit\";\r\n              if (res.data) {\r\n                this.formData.id = res.data;\r\n              }\r\n              this.$refs.editForm.getDetails(this.formData.id);\r\n            } else {\r\n              this.pageType = \"list\";\r\n            }\r\n          });\r\n        })\r\n        .catch((e) => {\r\n          console.log(e);\r\n        });\r\n    },\r\n\r\n    //返回\r\n    goBackPage(data) {\r\n      this.pageType = \"list\";\r\n    },\r\n    /**导出 */\r\n    toExport() {\r\n      let baseUrl = process.env.BASEURL;\r\n      let params = \"\";\r\n      let form = Object.assign({}, this.tableConfig.queryObj.queryData);\r\n      if (form.daterange) {\r\n        form.comeinStart = form.daterange[0] || \"\";\r\n        form.comeinEnd = form.daterange[1] || \"\";\r\n        delete form.daterange;\r\n      }\r\n      for (const key in form) {\r\n        params += `${key}=${form[key]}&`;\r\n      }\r\n\r\n      params = params.substring(0, params.length - 1);\r\n      let url = `${baseUrl}/trainRecord/exportAdmUnPass.htm?${params}`;\r\n      window.open(url);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=df976bb6&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}