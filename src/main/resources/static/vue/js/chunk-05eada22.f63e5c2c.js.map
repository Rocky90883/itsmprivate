{"version":3,"sources":["webpack:///./src/views/itAssets/myAsset/index.vue?590e","webpack:///src/views/itAssets/myAsset/index.vue","webpack:///./src/views/itAssets/myAsset/index.vue?5456","webpack:///./src/views/itAssets/myAsset/index.vue","webpack:///./src/views/itAssets/assetTransfers/add.vue?25aa","webpack:///src/views/itAssets/assetTransfers/add.vue","webpack:///./src/views/itAssets/assetTransfers/add.vue?7bad","webpack:///./src/views/itAssets/assetTransfers/add.vue","webpack:///./src/api/itAssets/assetTransfers.js","webpack:///./src/views/itAssets/assetTransfers/assetSelete.vue?4a3e","webpack:///src/views/itAssets/assetTransfers/assetSelete.vue","webpack:///./src/views/itAssets/assetTransfers/assetSelete.vue?1720","webpack:///./src/views/itAssets/assetTransfers/assetSelete.vue","webpack:///./src/api/itAssets/assetRetirement.js","webpack:///./src/views/itAssets/myAsset/index.vue?de74","webpack:///./src/views/itAssets/assetRetirement/add.vue?68df","webpack:///src/views/itAssets/assetRetirement/add.vue","webpack:///./src/views/itAssets/assetRetirement/add.vue?16c7","webpack:///./src/views/itAssets/assetRetirement/add.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_b","directives","name","rawName","value","pageType","expression","ref","tableConfig","attrs","rightBtnArr","on","goBackPage","actionType","formData","$event","_e","staticRenderFns","components","data","label","showMember","details","currentItem","orgMemberSelect","showFixedHeight","searchObj","searchMethod","searchArr","queryObj","method","queryData","page","pageSize","tableDataObj","tableArr","total","operateArr","tableObj","selectionShow","indexShow","tableMethods","selection","showItems","paginationObj","pageSizes","paginationIsshow","showklTable","computed","arr","watch","val","getTableData","mounted","methods","form","pageCount","$delete","key","confirmMethods","assetId","row","id","opt","type","actionInfo","assetTypeName","goodsModel","brand","sourceId","beforeEmpId","staffunName","employeeId","doSubmit","$refs","editForm","doTrans","doRetirement","billDate","confirmMan","remark","submitType","actionApi","params","then","res","component","formConfig","editFormData","scopedSlots","_u","fn","editFormInfo","isWorkFlowEdit","model","callback","$$v","$set","stopPropagation","goSeleteAsset","slot","status","attachSetting","workflowIsApprover","beforeSubmit","workFlowParams","workFlowSuccess","hadSeleteData","showSelete","changeSeleteAsset","props","Object","default","String","defaultSet","Boolean","itemArr","title","select","billType","btnArr","created","init","procInstType","assignercodes","defaultForm","assign","$utils","getNowDay","getDetails","map","getFormData","setFormItem","submitBefore","Promise","$emit","getListApi","request","url","insertApi","updateApi","deleteApi","getDetailsApi","showDialong","doSave","doClose","tableSetting","Array","maxHeight","column","getAssets","list","length","$message","warning"],"mappings":"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","file":"js/chunk-05eada22.f63e5c2c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"assetRegister h100\"},[_c('div',{staticClass:\"page-main-box\"},[_c('KlTable',_vm._b({directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.pageType == 'list'),expression:\"pageType == 'list'\"}],ref:\"klTable\"},'KlTable',_vm.tableConfig,false)),(_vm.pageType !== 'list')?_c('editPage',{attrs:{\"rightBtnArr\":_vm.rightBtnArr},on:{\"goBackPage\":_vm.goBackPage}},[(_vm.actionType == 'trans')?_c('transPage',{ref:\"editForm\",attrs:{\"defaultSet\":\"\",\"pageType\":_vm.pageType,\"formData\":_vm.formData},on:{\"update:pageType\":function($event){_vm.pageType=$event},\"update:page-type\":function($event){_vm.pageType=$event}}}):_vm._e(),(_vm.actionType == 'retirement')?_c('retirementPage',{ref:\"editForm\",attrs:{\"defaultSet\":\"\",\"pageType\":_vm.pageType,\"formData\":_vm.formData},on:{\"update:pageType\":function($event){_vm.pageType=$event},\"update:page-type\":function($event){_vm.pageType=$event}}}):_vm._e()],1):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"assetRegister h100\">\r\n    <div class=\"page-main-box\">\r\n      <KlTable v-bind=\"tableConfig\" v-show=\"pageType == 'list'\" ref=\"klTable\"></KlTable>\r\n      <editPage v-if=\"pageType !== 'list'\" @goBackPage=\"goBackPage\" :rightBtnArr=\"rightBtnArr\">\r\n        <transPage\r\n          ref=\"editForm\"\r\n          defaultSet\r\n          v-if=\"actionType == 'trans'\"\r\n          :pageType.sync=\"pageType\"\r\n          :formData=\"formData\"\r\n        ></transPage>\r\n        <retirementPage\r\n          ref=\"editForm\"\r\n          defaultSet\r\n          v-if=\"actionType == 'retirement'\"\r\n          :pageType.sync=\"pageType\"\r\n          :formData=\"formData\"\r\n        ></retirementPage>\r\n      </editPage>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getListApi, //获取分配列表\r\n  confirmApi, //确认、接受、驳回\r\n} from \"@/api/itAssets/myAsset\";\r\nimport transPage from \"@/views/itAssets/assetTransfers/add\";\r\nimport retirementPage from \"@/views/itAssets/assetRetirement/add\";\r\nimport {\r\n  updateApi as updateRetirementApi,\r\n  insertApi as insertRetirementApi,\r\n} from \"@/api/itAssets/assetRetirement\";\r\n\r\nimport {\r\n  updateApi as updateTransApi,\r\n  insertApi as insertTransApi,\r\n} from \"@/api/itAssets/assetTransfers\";\r\nexport default {\r\n  name: \"myAsset\",\r\n  components: { transPage, retirementPage },\r\n  data() {\r\n    return {\r\n      label: \"\",\r\n      showMember: false,\r\n      details: false,\r\n      currentItem: {},\r\n      orgMemberSelect: {},\r\n      tableConfig: {\r\n        showFixedHeight: true,\r\n        searchObj: {\r\n          searchMethod: (params, that) => {\r\n            if (this.tableConfig.tableDataObj) {\r\n              this.getTableData();\r\n            } else {\r\n            }\r\n          },\r\n          searchArr: [\r\n            {\r\n              type: \"el-input\",\r\n              label: \"型号\",\r\n              model: \"goodsModel\",\r\n              placeholder: \"型号\",\r\n            },\r\n            {\r\n              type: \"el-select\",\r\n              label: \"资产分类\",\r\n              model: \"assetTypeId\",\r\n              option: this.$store.getters.assetTypeList,\r\n            },\r\n          ],\r\n        },\r\n        // 查询条件参数\r\n        queryObj: {\r\n          method: () => {\r\n            this.getTableData();\r\n          },\r\n          queryData: {\r\n            page: 1,\r\n            pageSize: 15, //pageCount\r\n          },\r\n        },\r\n        tableDataObj: {\r\n          tableArr: [],\r\n          total: null,\r\n        },\r\n        operateArr: [],\r\n        //  table表配置参数\r\n        tableObj: {\r\n          // 左边选择框展示\r\n          selectionShow: false,\r\n          // 左边序号展示\r\n          indexShow: true,\r\n          // table表事件参数配置\r\n          tableMethods: {\r\n            selection: (val) => {\r\n              this.selectionData = val;\r\n            },\r\n          },\r\n          // table表展示列配置\r\n          showItems: [\r\n            {\r\n              name: \"资产分类\",\r\n              prop: \"assetTypeName\",\r\n              // width: 150,\r\n              // align: \"left\",\r\n            },\r\n            {\r\n              name: \"品牌\",\r\n              prop: \"brand\",\r\n              id: \"brand_type\",\r\n              // width: 150,\r\n              // align: \"center\",\r\n              scopeType: \"formate\",\r\n              method: (row) => {\r\n                let value = row.brand;\r\n                return this.$store.getters[\"fineDirtDataName\"](\r\n                  \"brand_type\",\r\n                  value\r\n                );\r\n              },\r\n            },\r\n            {\r\n              name: \"型号\",\r\n              prop: \"goodsModel\",\r\n            },\r\n            {\r\n              name: \"资产编码\",\r\n              prop: \"assetsNumber\",\r\n            },\r\n            {\r\n              name: \"资产状态\",\r\n              prop: \"assetsStatus\",\r\n              scopeType: \"formate\",\r\n              method: (row) => {\r\n                let value = row.assetsStatus;\r\n                return (\r\n                  this.$store.getters[\"fineDirtDataName\"](\r\n                    \"assets_status\",\r\n                    value\r\n                  ) || value\r\n                );\r\n              },\r\n            },\r\n            {\r\n              name: \"操作\",\r\n              prop: \"operate\",\r\n              // width: 150,\r\n              scopeType: \"button\",\r\n              fixed: \"right\",\r\n              buttonArr: [\r\n                // 最后一行操作栏数组\r\n\r\n                {\r\n                  name: \"确认\",\r\n                  method: (row) => {\r\n                    this.confirmMethods(row, 1);\r\n                  },\r\n                  isShow: (row, that) => {\r\n                    return row.assetsStatus == \"0\"; //是否显示\r\n                    // return this.$store.getters[\"isBtnAuth\"](\"update\");\r\n                  },\r\n                  icon: \"false\",\r\n                },\r\n                {\r\n                  name: \"接收\",\r\n                  method: (row) => {\r\n                    this.confirmMethods(row, 2);\r\n                  },\r\n                  isShow: (row, that) => {\r\n                    return row.assetsStatus == \"1\";\r\n                    // return this.$store.getters[\"isBtnAuth\"](\"update\");\r\n                  },\r\n                  icon: \"false\",\r\n                },\r\n                {\r\n                  name: \"驳回\",\r\n                  method: (row) => {\r\n                    this.confirmMethods(row, 3);\r\n                  },\r\n                  isShow: (row, that) => {\r\n                    return row.assetsStatus == \"1\" || row.assetsStatus == \"0\";\r\n                    // return this.$store.getters[\"isBtnAuth\"](\"update\");\r\n                  },\r\n                  icon: \"false\",\r\n                },\r\n                {\r\n                  name: \"转移\",\r\n                  method: (row) => {\r\n                    this.actionInfo(row, \"trans\");\r\n                  },\r\n                  isShow: (row, that) => {\r\n                    return row.assetsStatus == \"2\";\r\n                    // return this.$store.getters[\"isBtnAuth\"](\"update\");\r\n                  },\r\n                  icon: \"false\",\r\n                },\r\n                {\r\n                  name: \"报废\",\r\n                  method: (row) => {\r\n                    this.actionInfo(row, \"retirement\");\r\n                  },\r\n                  isShow: (row, that) => {\r\n                    return row.assetsStatus == \"2\";\r\n                    // return this.$store.getters[\"isBtnAuth\"](\"details\");\r\n                  },\r\n                  icon: \"false\",\r\n                },\r\n              ],\r\n            },\r\n          ],\r\n        },\r\n        // 分页展示总条配置\r\n        paginationObj: {\r\n          pageSizes: [15, 30, 50, 100],\r\n        },\r\n        paginationIsshow: true,\r\n        showklTable: false,\r\n      },\r\n      pageType: \"list\",\r\n      actionType: \"trans\",\r\n      formData: {},\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    rightBtnArr() {\r\n      let arr = [\r\n        {\r\n          text: \"保存\",\r\n          icon: \"el-icon-check\",\r\n          hide: this.pageType == \"details\",\r\n          methods: () => {\r\n            this.doSubmit(2);\r\n          },\r\n        },\r\n        {\r\n          text: \"提交\",\r\n          icon: \"el-icon-finished\",\r\n          hide: this.pageType == \"details\",\r\n          methods: () => {\r\n            this.doSubmit(1);\r\n          },\r\n        },\r\n      ];\r\n      return arr;\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    pageType(val) {\r\n      if (val === \"list\") {\r\n        this.getTableData();\r\n      }\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    this.getTableData();\r\n  },\r\n\r\n  methods: {\r\n    //查询数据\r\n    getTableData() {\r\n      let form = Object.assign({}, this.tableConfig.queryObj.queryData);\r\n      form.pageCount = form.pageSize;\r\n      this.$delete(form, \"pageSize\");\r\n      // 型号、资产分类选择框清空后，显示全部列表\r\n      for (const key in form) {\r\n        if (form[key] == \"\") {\r\n          delete form[key];\r\n        }\r\n      }\r\n\r\n      getListApi(form)\r\n        .then((res) => {\r\n          this.$set(\r\n            this.tableConfig.tableDataObj,\r\n            \"tableArr\",\r\n            res.data.list || []\r\n          );\r\n          this.$set(\r\n            this.tableConfig.tableDataObj,\r\n            \"total\",\r\n            res.data.total || 0\r\n          );\r\n        })\r\n        .catch((res) => {\r\n          this.$set(this.tableConfig.tableDataObj, \"tableArr\", []);\r\n          this.$set(this.tableConfig.tableDataObj, \"total\", 0);\r\n        });\r\n    },\r\n    //确认/驳回/接收\r\n    confirmMethods(row, type) {\r\n      let form = {\r\n        assetId: row.id,\r\n        opt: type,\r\n      };\r\n      // console.log(form);\r\n      confirmApi(form)\r\n        .then((res) => {\r\n          this.getTableData();\r\n          this.$message.success(\"操作成功！\");\r\n        })\r\n        .catch((res) => {\r\n          this.$message.success(\"操作出错！\");\r\n        });\r\n    },\r\n    //转移or报废\r\n    actionInfo(row, actionType) {\r\n      let {\r\n        assetTypeName,\r\n        goodsModel,\r\n        brand,\r\n        id: sourceId,\r\n        empId: beforeEmpId,\r\n\r\n        staffunName,\r\n      } = row;\r\n      this.formData = {\r\n        assetTypeName,\r\n        goodsModel,\r\n        brand,\r\n        sourceId,\r\n        beforeEmpId,\r\n        staffunName,\r\n        employeeId: beforeEmpId,\r\n      };\r\n      this.actionType = actionType; //操作类型\r\n      this.pageType = \"add\";\r\n    },\r\n    //点击操作\r\n    doSubmit(submitType) {\r\n      this.$refs.editForm\r\n        .getFormData()\r\n        .then((data) => {\r\n          if (this.actionType == \"trans\") {\r\n            this.doTrans(submitType, data);\r\n          } else if (this.actionType == \"retirement\") {\r\n            this.doRetirement(submitType, data);\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.log(e);\r\n        });\r\n    },\r\n    //点击操作转移\r\n    doTrans(submitType, data) {\r\n      this.$refs.editForm\r\n        .getFormData()\r\n        .then((data) => {\r\n          let {\r\n            billDate,\r\n            confirmMan,\r\n            depatcode,\r\n            beforeEmpId,\r\n            empId,\r\n            remark,\r\n            sourceId,\r\n            id,\r\n          } = data;\r\n          let params = {\r\n            billDate,\r\n            confirmMan,\r\n            depatcode,\r\n            beforeEmpId,\r\n            empId,\r\n            remark,\r\n            sourceId,\r\n            submitType: submitType,\r\n            id,\r\n          };\r\n          //测试流程用，后注释\r\n          // params.empId = \"lijunt\";\r\n          // params.confirmMan = \"lijunt\";\r\n\r\n          const actionApi = (queryData) => {\r\n            return queryData.id\r\n              ? updateTransApi(queryData)\r\n              : insertTransApi(queryData);\r\n          };\r\n\r\n          actionApi(params).then((res) => {\r\n            this.$message.success(\"操作成功，请在资产转移菜单中查询\");\r\n            if (submitType == 2) {\r\n              this.pageType = \"edit\";\r\n              if (res.data) {\r\n                this.formData.id = res.data;\r\n              }\r\n              this.$refs.editForm.getDetails(this.formData.id);\r\n            } else {\r\n              this.pageType = \"list\";\r\n            }\r\n          });\r\n        })\r\n        .catch((e) => {\r\n          console.log(e);\r\n        });\r\n    },\r\n    //执行报废\r\n    doRetirement(submitType, data) {\r\n      let { billDate, confirmMan, employeeId, remark, sourceId, id } = data;\r\n      let params = {\r\n        billDate,\r\n        confirmMan,\r\n        employeeId,\r\n        remark,\r\n        sourceId,\r\n        submitType: submitType,\r\n        id,\r\n      };\r\n      //测试流程用，后注释\r\n      // params.empId = \"lijunt\";\r\n      // params.confirmMan = \"lijunt\";\r\n\r\n      const actionApi = (queryData) => {\r\n        return queryData.id\r\n          ? updateRetirementApi(queryData)\r\n          : insertRetirementApi(queryData);\r\n      };\r\n\r\n      actionApi(params).then((res) => {\r\n        this.$message.success(\"操作成功，请在资产转移菜单中查询\");\r\n        if (submitType == 2) {\r\n          this.pageType = \"edit\";\r\n          if (res.data) {\r\n            this.formData.id = res.data;\r\n          }\r\n          this.$refs.editForm.getDetails(this.formData.id);\r\n        } else {\r\n          this.pageType = \"list\";\r\n        }\r\n      });\r\n    },\r\n    //返回\r\n    goBackPage(data) {\r\n      this.pageType = \"list\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.page-main-box {\r\n  height: 100%;\r\n  overflow: hidden;\r\n  padding: 10px 20px !important;\r\n  /* height: calc(100% - 20px); */\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=c92c14a6&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"add-info\"},[_c('div',{staticClass:\"record__baseinfo\"},[_c('dividerTitle',{attrs:{\"title\":'基本信息'}}),_c('editForm',{ref:\"editForm\",attrs:{\"formConfig\":_vm.formConfig,\"formData\":_vm.editFormData},scopedSlots:_vm._u([{key:\"assetTypeName\",fn:function(ref){\nvar editFormInfo = ref.editFormInfo;\nreturn [_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"请选择资产信息\",\"readonly\":\"\",\"disabled\":_vm.pageType=='details'&&!_vm.isWorkFlowEdit,\"size\":\"mini\"},model:{value:(editFormInfo.assetTypeName),callback:function ($$v) {_vm.$set(editFormInfo, \"assetTypeName\", $$v)},expression:\"editFormInfo.assetTypeName\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.goSeleteAsset($event)}},slot:\"append\"})],1)]}}])})],1),(_vm.editFormData.status&&_vm.editFormData.status!==2)?_c('div',{staticClass:\"record__attach\"},[_c('dividerTitle',{attrs:{\"title\":\"流程附件\"}}),_c('attachTable',{ref:\"attachFile\",attrs:{\"attachSetting\":_vm.attachSetting,\"hideBtn\":!_vm.formData.workflowIsApprover}})],1):_vm._e(),(_vm.pageType == 'details'&&_vm.editFormData.status&&_vm.editFormData.status!==2)?_c('div',{staticClass:\"record__workflow\"},[_c('dividerTitle',{attrs:{\"title\":'工作流'}}),_c('workFlow',{attrs:{\"currentFlowData\":_vm.editFormData,\"beforeSubmit\":_vm.beforeSubmit,\"otherParams\":_vm.workFlowParams},on:{\"submitSuccess\":_vm.workFlowSuccess}})],1):_vm._e(),(_vm.showSelete)?_c('assetSelete',{attrs:{\"hadSeleteData\":_vm.hadSeleteData,\"showSelete\":_vm.showSelete},on:{\"changeSelete\":_vm.changeSeleteAsset,\"update:showSelete\":function($event){_vm.showSelete=$event},\"update:show-selete\":function($event){_vm.showSelete=$event}}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"add-info\">\r\n    <div class=\"record__baseinfo\">\r\n      <dividerTitle :title=\"'基本信息'\"></dividerTitle>\r\n      <editForm :formConfig=\"formConfig\" ref=\"editForm\" :formData=\"editFormData\">\r\n        <template #assetTypeName=\"{editFormInfo}\">\r\n          <el-input\r\n            placeholder=\"请选择资产信息\"\r\n            v-model=\"editFormInfo.assetTypeName\"\r\n            readonly\r\n            :disabled=\"pageType=='details'&&!isWorkFlowEdit\"\r\n            size=\"mini\"\r\n            class=\"input-with-select\"\r\n          >\r\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click.stop=\"goSeleteAsset\"></el-button>\r\n          </el-input>\r\n        </template>\r\n      </editForm>\r\n    </div>\r\n    <div class=\"record__attach\" v-if=\"editFormData.status&&editFormData.status!==2\">\r\n      <dividerTitle title=\"流程附件\"></dividerTitle>\r\n      <attachTable\r\n        :attachSetting=\"attachSetting\"\r\n        :hideBtn=\"!formData.workflowIsApprover\"\r\n        ref=\"attachFile\"\r\n      ></attachTable>\r\n    </div>\r\n    <div\r\n      class=\"record__workflow\"\r\n      v-if=\"pageType == 'details'&&editFormData.status&&editFormData.status!==2\"\r\n    >\r\n      <dividerTitle :title=\"'工作流'\"></dividerTitle>\r\n      <workFlow\r\n        :currentFlowData=\"editFormData\"\r\n        :beforeSubmit=\"beforeSubmit\"\r\n        :otherParams=\"workFlowParams\"\r\n        @submitSuccess=\"workFlowSuccess\"\r\n      ></workFlow>\r\n    </div>\r\n    <assetSelete\r\n      v-if=\"showSelete\"\r\n      :hadSeleteData=\"hadSeleteData\"\r\n      @changeSelete=\"changeSeleteAsset\"\r\n      :showSelete.sync=\"showSelete\"\r\n    ></assetSelete>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport workFlow from \"@/components/workFlow/index\";\r\nimport assetSelete from \"./assetSelete\";\r\nimport { getDetailsApi, updateApi } from \"@/api/itAssets/assetTransfers\";\r\nexport default {\r\n  components: { workFlow, assetSelete },\r\n  props: {\r\n    formData: {\r\n      type: Object,\r\n      default: new Object(),\r\n    },\r\n    pageType: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    defaultSet: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      formConfig: {\r\n        itemArr: [\r\n          {\r\n            label: \"申请日期\",\r\n            prop: \"billDate\",\r\n            type: \"date\",\r\n            required: true,\r\n          },\r\n          {\r\n            label: \"资产分类\",\r\n            prop: \"assetTypeName\",\r\n            type: \"text\",\r\n            required: true,\r\n          },\r\n          {\r\n            label: \"型号\",\r\n            prop: \"goodsModel\",\r\n            type: \"text\",\r\n            placeholder: \"选择资产后自动带出\",\r\n            disabled: true,\r\n          },\r\n          {\r\n            label: \"原归属人\",\r\n            prop: \"staffunName\",\r\n            type: \"text\",\r\n            placeholder: \"选择资产后自动带出\",\r\n            disabled: true,\r\n          },\r\n          {\r\n            label: \"接收人\",\r\n            prop: \"zystaffunName\",\r\n            idsStr: \"empId\",\r\n            type: \"user\",\r\n            required: true,\r\n            trigger: \"change\",\r\n            methods: (list) => {\r\n              if (list.length) {\r\n                let [obj] = list;\r\n                let { orgNodeCode, orgNodeName, name, code } = obj;\r\n                this.$refs.editForm.setFormItem(\"depatcode\", orgNodeCode);\r\n                this.$refs.editForm.setFormItem(\"depatName\", orgNodeName);\r\n                this.$refs.editForm.setFormItem(\"confirmMan\", code); //下一个审批人\r\n                this.$refs.editForm.setFormItem(\"confirmManName\", name); //下一个审批人\r\n              }\r\n            },\r\n          },\r\n          {\r\n            label: \"接收部门\",\r\n            prop: \"depatName\",\r\n            type: \"text\",\r\n            placeholder: \"自动带出\",\r\n            required: true,\r\n            disabled: true,\r\n            trigger: \"change\",\r\n          },\r\n          {\r\n            label: \"审批人\",\r\n            prop: \"confirmManName\",\r\n            type: \"text\",\r\n            placeholder: \"自动带出\",\r\n            required: true,\r\n            disabled: true,\r\n            isHide: this.pageType == \"details\" && this.isWorkFlowEdit,\r\n            trigger: \"change\",\r\n          },\r\n          {\r\n            label: \"转移说明\",\r\n            prop: \"remark\",\r\n            type: \"textarea\",\r\n            span: 24,\r\n            rows: 3,\r\n          },\r\n        ],\r\n      },\r\n      beforeSubmit: {\r\n        //工作流提交前检测\r\n        methods: (data) => {\r\n          return this.submitBefore(data);\r\n        },\r\n      },\r\n      editFormData: {},\r\n      showSelete: false,\r\n      hadSeleteData: [],\r\n      //附件设置\r\n      attachSetting: {\r\n        title: \"\",\r\n        select: false,\r\n        billType: \"asset_shift\", //页面标识\r\n        sourceId: \"\", //单据的ID\r\n        btnArr: [\"add\", \"delete\", \"save\"],\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    this.init();\r\n  },\r\n  computed: {\r\n    //工作流额外参数\r\n    workFlowParams() {\r\n      let { procInstType } = this.editFormData;\r\n      if (this.formData.status === 4 && this.formData.workflowIsApprover) {\r\n        return {\r\n          procInstType: procInstType || \"\",//页面类型\r\n          assignercodes: [this.editFormData.confirmMan],//下一个审批人（流程启动后才有）\r\n        };\r\n      }\r\n      return { procInstType: procInstType || \"\" };\r\n    },\r\n    //是否是流程中可编辑\r\n    isWorkFlowEdit() {\r\n      if (this.formData.status === 4 && this.formData.workflowIsApprover) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    init() {\r\n      if (this.pageType == \"add\") {\r\n        let defaultForm = {};\r\n        if (this.defaultSet) {\r\n          defaultForm = { ...this.formData };\r\n        }\r\n        this.editFormData = Object.assign({}, defaultForm, {\r\n          billDate: this.$utils.getNowDay(),\r\n        });\r\n      } else {\r\n        this.getDetails(this.formData.id);\r\n      }\r\n\r\n      if (this.pageType == \"details\") {\r\n        if (!this.isWorkFlowEdit) {\r\n          this.formConfig.itemArr.map((i) => (i.disabled = true));\r\n        }\r\n        this.attachSetting.sourceId = this.formData.id; //附件id\r\n      }\r\n    },\r\n    //获取详情\r\n    async getDetails(id) {\r\n      let res = await getDetailsApi(id);\r\n      let obj = res.data || {};\r\n\r\n      this.editFormData = Object.assign({}, obj, {\r\n        confirmMan: obj.empId,\r\n        confirmManName: obj.zystaffunName,\r\n      });\r\n    },\r\n    //获取表单数据\r\n    getFormData() {\r\n      return this.$refs.editForm.getFormData();\r\n    },\r\n    //点击选择资产\r\n    goSeleteAsset() {\r\n      if (this.pageType == \"details\") {\r\n        return;\r\n      }\r\n      let sourceId = this.$refs.editForm.getFormItem(\"sourceId\");\r\n      this.hadSeleteData = [{ id: sourceId }];\r\n\r\n      this.showSelete = true;\r\n    },\r\n    //确定选择资产\r\n    changeSeleteAsset(list) {\r\n      let [obj] = list;\r\n      let {\r\n        assetTypeName,\r\n        goodsModel,\r\n        brand,\r\n        id: sourceId,\r\n        empId: beforeEmpId,\r\n        staffunName,\r\n      } = obj;\r\n      this.$refs.editForm.setFormItem(\"assetTypeName\", assetTypeName);\r\n      this.$refs.editForm.setFormItem(\"goodsModel\", goodsModel);\r\n      this.$refs.editForm.setFormItem(\"brand\", brand);\r\n      this.$refs.editForm.setFormItem(\"sourceId\", sourceId);\r\n      this.$refs.editForm.setFormItem(\"beforeEmpId\", beforeEmpId); //原归属人id\r\n      this.$refs.editForm.setFormItem(\"staffunName\", staffunName); //原归属人\r\n    },\r\n    //提交前检测\r\n    //提交前检测\r\n    submitBefore(data) {\r\n      //如果是起草节点\r\n      if (this.isWorkFlowEdit) {\r\n        return new Promise((resolve, reject) => {\r\n          this.$refs.editForm\r\n            .getFormData()\r\n            .then((data) => {\r\n              let {\r\n                billDate,\r\n                confirmMan,\r\n                depatcode,\r\n                beforeEmpId,\r\n                empId,\r\n                remark,\r\n                sourceId,\r\n                id,\r\n              } = data;\r\n              let params = {\r\n                billDate,\r\n                confirmMan,\r\n                depatcode,\r\n                beforeEmpId,\r\n                empId,\r\n                remark,\r\n                sourceId,\r\n                submitType: 1,\r\n                id,\r\n              };\r\n\r\n              this.editFormData = Object.assign({}, data);\r\n              updateApi(params)\r\n                .then((res) => {\r\n                  resolve();\r\n                })\r\n                .catch((e) => {\r\n                  reject(e);\r\n                });\r\n            })\r\n            .catch((e) => {\r\n              reject(\"表单信息未填写完整\");\r\n            });\r\n        });\r\n      } else {\r\n        return true;\r\n      }\r\n    },\r\n    //工作流提交成功之后\r\n    workFlowSuccess() {\r\n      this.$emit(\"update:pageType\", \"list\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./add.vue?vue&type=template&id=577939aa&\"\nimport script from \"./add.vue?vue&type=script&lang=js&\"\nexport * from \"./add.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import request from '@/request/api'\r\n/**===========基本信息接口 */\r\n//获取资产转移的列表\r\nexport function getListApi(data = {}) {\r\n    return request({\r\n        url: '/asset/ShiftAction/queryList.htm',\r\n        method: 'post',\r\n        data: data\r\n    })\r\n}\r\n//新增\r\nexport function insertApi(data = {}) {\r\n    return request({\r\n        url: '/asset/ShiftAction/addShift.htm',\r\n        method: 'post',\r\n        data: data\r\n    })\r\n}\r\n//更新\r\nexport function updateApi(data = {}) {\r\n    return request({\r\n        url: '/asset/ShiftAction/updateShift.htm',\r\n        method: 'post',\r\n        data: data\r\n    })\r\n}\r\n//提交\r\nexport function submitApi(data = {}) {\r\n    return request({\r\n        url: '/asset/ShiftAction/updateShift.htm',\r\n        method: 'post',\r\n        data: data\r\n    })\r\n}\r\n//删除\r\nexport function deleteApi(data = {}) {\r\n    return request({\r\n        url: '/asset/ShiftAction/delete.htm',\r\n        method: 'post',\r\n        params: data\r\n    })\r\n}\r\n//详情\r\nexport function getDetailsApi(id = \"\") {\r\n    return request({\r\n        url: '/asset/ShiftAction/detail.htm',\r\n        method: 'post',\r\n        params: { id: id }\r\n    })\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"asset-selete\"},[_c('dialogPublic',{attrs:{\"title\":\"我的资产\",\"show\":_vm.showDialong,\"fullscreen\":\"\",\"appendTobody\":\"\"},on:{\"update:show\":function($event){_vm.showDialong=$event},\"doSubmit\":_vm.doSave,\"doClose\":_vm.doClose}},[_c('seleteTable',{ref:\"seleteTable\",attrs:{\"tableSetting\":_vm.tableSetting,\"hadData\":_vm.hadSeleteData}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"asset-selete\">\r\n    <dialogPublic\r\n      title=\"我的资产\"\r\n      :show.sync=\"showDialong\"\r\n      @doSubmit=\"doSave\"\r\n      @doClose=\"doClose\"\r\n      fullscreen\r\n      appendTobody\r\n    >\r\n      <seleteTable :tableSetting=\"tableSetting\" :hadData=\"hadSeleteData\" ref=\"seleteTable\"></seleteTable>\r\n    </dialogPublic>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport seleteTable from \"@/components/table/seleteTable\";\r\nimport { getListApi } from \"@/api/itAssets/myAsset\";\r\nexport default {\r\n  props: {\r\n    hadSeleteData: {\r\n      type: Array,\r\n      default: new Array(),\r\n    },\r\n    showSelete: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n  },\r\n  components: { seleteTable },\r\n  data() {\r\n    return {\r\n      tableSetting: {\r\n        maxHeight: \"600px\",\r\n        column: [\r\n          {\r\n            label: \"编号\",\r\n            prop: \"assetsNumber\",\r\n          },\r\n          {\r\n            label: \"分类\",\r\n            prop: \"assetTypeName\",\r\n          },\r\n          {\r\n            label: \"品牌\",\r\n            prop: \"brand\",\r\n          },\r\n          {\r\n            label: \"型号\",\r\n            prop: \"goodsModel\",\r\n          },\r\n          {\r\n            label: \"所有人\",\r\n            prop: \"staffunName\",\r\n          },\r\n        ],\r\n        data: [],\r\n      },\r\n      showDialong: true,\r\n    };\r\n  },\r\n  created() {\r\n    this.getAssets();\r\n  },\r\n  methods: {\r\n    async getAssets() {\r\n      let res = await getListApi();\r\n      let { list } = res.data;\r\n      this.$refs.seleteTable.setTableData(list || []);\r\n    },\r\n    doClose() {\r\n      this.$emit(\"update:showSelete\", false);\r\n    },\r\n    doSave() {\r\n      let list = this.$refs.seleteTable.getSeleteData();\r\n      if (list.length == 1) {\r\n        this.$emit(\"changeSelete\", list);\r\n        this.doClose();\r\n      } else {\r\n        this.$message.warning(\"请选择一个需要操作的资产！\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./assetSelete.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./assetSelete.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./assetSelete.vue?vue&type=template&id=39b59a0c&\"\nimport script from \"./assetSelete.vue?vue&type=script&lang=js&\"\nexport * from \"./assetSelete.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import request from '@/request/api'\r\n/**===========基本信息接口 */\r\n//获取资产转移的列表\r\nexport function getListApi(data = {}) {\r\n    return request({\r\n        url: '/asset/scrappedAction/queryList.htm',\r\n        method: 'post',\r\n        data: data\r\n    })\r\n}\r\n//新增/提交\r\nexport function insertApi(data = {}) {\r\n    return request({\r\n        url: '/asset/scrappedAction/addScrapped.htm',\r\n        method: 'post',\r\n        data: data\r\n    })\r\n}\r\n//更新/提交\r\nexport function updateApi(data = {}) {\r\n    return request({\r\n        url: '/asset/scrappedAction/updateScrapped.htm',\r\n        method: 'post',\r\n        data: data\r\n    })\r\n}\r\n//删除\r\nexport function deleteApi(data = {}) {\r\n    return request({\r\n        url: '/asset/scrappedAction/delete.htm',\r\n        method: 'post',\r\n        params: data\r\n    })\r\n}\r\n//详情\r\nexport function getDetailsApi(id = \"\") {\r\n    return request({\r\n        url: '/asset/scrappedAction/detail.htm',\r\n        method: 'post',\r\n        params: { id: id }\r\n    })\r\n}","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"add-info\"},[_c('div',{staticClass:\"record__baseinfo\"},[_c('dividerTitle',{attrs:{\"title\":'基本信息'}}),_c('editForm',{ref:\"editForm\",attrs:{\"formConfig\":_vm.formConfig,\"formData\":_vm.editFormData},scopedSlots:_vm._u([{key:\"assetTypeName\",fn:function(ref){\nvar editFormInfo = ref.editFormInfo;\nreturn [_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"请选择资产信息\",\"readonly\":\"\",\"disabled\":_vm.pageType=='details'&&!_vm.isWorkFlowEdit,\"size\":\"mini\"},model:{value:(editFormInfo.assetTypeName),callback:function ($$v) {_vm.$set(editFormInfo, \"assetTypeName\", $$v)},expression:\"editFormInfo.assetTypeName\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.goSeleteAsset($event)}},slot:\"append\"})],1)]}}])})],1),(_vm.editFormData.status&&_vm.editFormData.status!==2)?_c('div',{staticClass:\"record__attach\"},[_c('dividerTitle',{attrs:{\"title\":\"流程附件\"}}),_c('attachTable',{ref:\"attachFile\",attrs:{\"attachSetting\":_vm.attachSetting,\"hideBtn\":!_vm.formData.workflowIsApprover}})],1):_vm._e(),(_vm.pageType == 'details'&&_vm.editFormData.status&&_vm.editFormData.status!==2)?_c('div',{staticClass:\"record__workflow\"},[_c('dividerTitle',{attrs:{\"title\":'工作流'}}),_c('workFlow',{attrs:{\"currentFlowData\":_vm.editFormData,\"beforeSubmit\":_vm.beforeSubmit,\"otherParams\":_vm.workFlowParams},on:{\"submitSuccess\":_vm.workFlowSuccess}})],1):_vm._e(),(_vm.showSelete)?_c('assetSelete',{attrs:{\"hadSeleteData\":_vm.hadSeleteData,\"showSelete\":_vm.showSelete},on:{\"changeSelete\":_vm.changeSeleteAsset,\"update:showSelete\":function($event){_vm.showSelete=$event},\"update:show-selete\":function($event){_vm.showSelete=$event}}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"add-info\">\r\n    <div class=\"record__baseinfo\">\r\n      <dividerTitle :title=\"'基本信息'\"></dividerTitle>\r\n      <editForm :formConfig=\"formConfig\" ref=\"editForm\" :formData=\"editFormData\">\r\n        <template #assetTypeName=\"{editFormInfo}\">\r\n          <el-input\r\n            placeholder=\"请选择资产信息\"\r\n            v-model=\"editFormInfo.assetTypeName\"\r\n            readonly\r\n            :disabled=\"pageType=='details'&&!isWorkFlowEdit\"\r\n            size=\"mini\"\r\n            class=\"input-with-select\"\r\n          >\r\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click.stop=\"goSeleteAsset\"></el-button>\r\n          </el-input>\r\n        </template>\r\n      </editForm>\r\n    </div>\r\n    <div class=\"record__attach\" v-if=\"editFormData.status&&editFormData.status!==2\">\r\n      <dividerTitle title=\"流程附件\"></dividerTitle>\r\n      <attachTable\r\n        :attachSetting=\"attachSetting\"\r\n        :hideBtn=\"!formData.workflowIsApprover\"\r\n        ref=\"attachFile\"\r\n      ></attachTable>\r\n    </div>\r\n    <div\r\n      class=\"record__workflow\"\r\n      v-if=\"pageType == 'details'&&editFormData.status&&editFormData.status!==2\"\r\n    >\r\n      <dividerTitle :title=\"'工作流'\"></dividerTitle>\r\n      <workFlow\r\n        :currentFlowData=\"editFormData\"\r\n        :beforeSubmit=\"beforeSubmit\"\r\n        :otherParams=\"workFlowParams\"\r\n        @submitSuccess=\"workFlowSuccess\"\r\n      ></workFlow>\r\n    </div>\r\n    <assetSelete\r\n      v-if=\"showSelete\"\r\n      :hadSeleteData=\"hadSeleteData\"\r\n      @changeSelete=\"changeSeleteAsset\"\r\n      :showSelete.sync=\"showSelete\"\r\n    ></assetSelete>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import workFlow from \"@/components/workFlow/index\";\r\nimport assetSelete from \"@/views/itAssets/assetTransfers/assetSelete\";\r\nimport { getDetailsApi, updateApi } from \"@/api/itAssets/assetRetirement\";\r\nexport default {\r\n  components: { assetSelete },\r\n  props: {\r\n    formData: {\r\n      type: Object,\r\n      default: new Object(),\r\n    },\r\n    pageType: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    defaultSet: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      formConfig: {\r\n        itemArr: [\r\n          {\r\n            label: \"申请日期\",\r\n            prop: \"billDate\",\r\n            type: \"date\",\r\n            required: true,\r\n          },\r\n          {\r\n            label: \"资产分类\",\r\n            prop: \"assetTypeName\",\r\n            type: \"text\",\r\n            required: true,\r\n          },\r\n          {\r\n            label: \"型号\",\r\n            prop: \"goodsModel\",\r\n            type: \"text\",\r\n            placeholder: \"选择资产后自动带出\",\r\n            disabled: true,\r\n          },\r\n          {\r\n            label: \"原归属人\",\r\n            prop: \"staffunName\",\r\n            type: \"text\",\r\n            placeholder: \"选择资产后自动带出\",\r\n            disabled: true,\r\n          },\r\n          {\r\n            label: \"审批人\",\r\n            prop: \"confirmManName\",\r\n            idsStr: \"confirmMan\",\r\n            type: \"user\",\r\n            isHide: this.pageType == \"details\" && !this.isWorkFlowEdit,\r\n            required: true,\r\n            trigger: \"change\",\r\n          },\r\n          {\r\n            label: \"报废说明\",\r\n            prop: \"remark\",\r\n            type: \"textarea\",\r\n            span: 24,\r\n            rows: 3,\r\n          },\r\n        ],\r\n      },\r\n      beforeSubmit: {\r\n        //工作流提交前检测\r\n        methods: (data) => {\r\n          return this.submitBefore(data);\r\n        },\r\n      },\r\n      editFormData: {},\r\n      showSelete: false,\r\n      hadSeleteData: [],\r\n      //附件设置\r\n      attachSetting: {\r\n        title: \"\",\r\n        select: false,\r\n        billType: \"asset_scrapped\", //页面标识\r\n        sourceId: \"\", //单据的ID\r\n        btnArr: [\"add\", \"delete\", \"save\"],\r\n      },\r\n    };\r\n  },\r\n\r\n  created() {\r\n    this.init();\r\n  },\r\n  computed: {\r\n    //工作流额外参数\r\n    workFlowParams() {\r\n      let { procInstType } = this.editFormData;\r\n      if (this.formData.status === 4 && this.formData.workflowIsApprover) {\r\n        return {\r\n          procInstType: procInstType || \"\",\r\n          assignercodes: [this.editFormData.confirmMan],\r\n        };\r\n      }\r\n      return { procInstType: procInstType || \"\" };\r\n    },\r\n    //是否是流程中可编辑\r\n    isWorkFlowEdit() {\r\n      if (this.formData.status === 4 && this.formData.workflowIsApprover) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    init() {\r\n      if (this.pageType == \"add\") {\r\n        let defaultForm = {};\r\n        if (this.defaultSet) {\r\n          defaultForm = { ...this.formData };\r\n        }\r\n        this.editFormData = Object.assign({}, defaultForm, {\r\n          billDate: this.$utils.getNowDay(),\r\n        });\r\n      } else {\r\n        this.getDetails(this.formData.id);\r\n      }\r\n\r\n      if (this.pageType == \"details\") {\r\n        if (!this.isWorkFlowEdit) {\r\n          this.formConfig.itemArr.map((i) => (i.disabled = true));\r\n        }\r\n        this.attachSetting.sourceId = this.formData.id; //附件id\r\n      }\r\n    },\r\n    //获取详情\r\n    async getDetails(id) {\r\n      let res = await getDetailsApi(id);\r\n      let obj = res.data || {};\r\n\r\n      this.editFormData = Object.assign({}, obj, {\r\n        confirmMan: obj.empId,\r\n        confirmManName: obj.zystaffunName,\r\n      });\r\n    },\r\n    //获取表单数据\r\n    getFormData() {\r\n      return this.$refs.editForm.getFormData();\r\n    },\r\n    //点击选择资产\r\n    goSeleteAsset() {\r\n      if (this.pageType == \"details\") {\r\n        return;\r\n      }\r\n      let sourceId = this.$refs.editForm.getFormItem(\"sourceId\");\r\n      this.hadSeleteData = [{ id: sourceId }];\r\n\r\n      this.showSelete = true;\r\n    },\r\n    //确定选择资产\r\n    changeSeleteAsset(list) {\r\n      let [obj] = list;\r\n      let {\r\n        assetTypeName,\r\n        goodsModel,\r\n        brand,\r\n        id: sourceId,\r\n        empId: employeeId,\r\n        staffunName,\r\n      } = obj;\r\n      this.$refs.editForm.setFormItem(\"assetTypeName\", assetTypeName);\r\n      this.$refs.editForm.setFormItem(\"goodsModel\", goodsModel);\r\n      this.$refs.editForm.setFormItem(\"brand\", brand);\r\n      this.$refs.editForm.setFormItem(\"sourceId\", sourceId);\r\n      this.$refs.editForm.setFormItem(\"employeeId\", employeeId); //原归属人id\r\n      this.$refs.editForm.setFormItem(\"staffunName\", staffunName); //原归属人\r\n    },\r\n    //提交前检测\r\n    submitBefore(data) {\r\n      //如果是起草节点\r\n      if (this.isWorkFlowEdit) {\r\n        return new Promise((resolve, reject) => {\r\n          this.$refs.editForm\r\n            .getFormData()\r\n            .then((data) => {\r\n              let {\r\n                billDate,\r\n                confirmMan,\r\n                employeeId,\r\n                remark,\r\n                sourceId,\r\n                id,\r\n              } = data;\r\n              let params = {\r\n                billDate,\r\n                confirmMan,\r\n                employeeId,\r\n                remark,\r\n                sourceId,\r\n                submitType: 1,\r\n                id,\r\n              };\r\n\r\n              this.editFormData = Object.assign({}, data);\r\n              return updateApi(params);\r\n            })\r\n            .catch((e) => {\r\n              reject(\"表单信息未填写完整\");\r\n            });\r\n        });\r\n      } else {\r\n        return true;\r\n      }\r\n    },\r\n    //工作流提交成功之后\r\n    workFlowSuccess() {\r\n      this.$emit(\"update:pageType\", \"list\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./add.vue?vue&type=template&id=bda034c6&\"\nimport script from \"./add.vue?vue&type=script&lang=js&\"\nexport * from \"./add.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}