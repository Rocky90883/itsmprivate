(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-da970af0"],{"38ed":function(e,t,a){},"508f":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"assetParameter h100"},[a("div",{staticClass:"page-main-box"},[a("KlTable",e._b({directives:[{name:"show",rawName:"v-show",value:"list"==e.pageType,expression:"pageType == 'list'"}],ref:"klTable"},"KlTable",e.tableConfig,!1)),"list"!==e.pageType?a("editPage",{attrs:{rightBtnArr:e.rightBtnArr},on:{goBackPage:e.goBackPage}},[a("addInfo",{ref:"editForm",attrs:{pageType:e.pageType,formData:e.formData}})],1):e._e()],1),a("dialogPublic",{attrs:{title:"选择部门",show:e.showMember,appendTobody:"",width:"800px",height:"400px"},on:{"update:show":function(t){e.showMember=t},doSubmit:e.chooseUser,doClose:function(){return e.showMember=!1}}},[e.showMember?a("orgMemberSelect",{ref:"orgMemberSelect",attrs:{seleteSetting:e.orgMemberSelect,otherInfo:e.otherInfo}}):e._e()],1)],1)},o=[],r=(a("b0c0"),a("d3b7"),a("ac1f"),a("1276"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"record__content"},[a("div",{staticClass:"record__baseinfo"},[a("dividerTitle",{attrs:{title:"基本信息"}}),a("editForm",{ref:"editForm",attrs:{formConfig:e.formConfig,formData:e.editFormData}})],1)])}),i=[],n=(a("d81d"),{props:{formData:{type:Object,default:new Object},pageType:{type:String,default:""}},data:function(){var e=this;return{editFormData:{suitableWorkArr:[]},trainingType:{},formConfig:{itemArr:[{label:"IT资产编号",prop:"assetsNumber",type:"text",span:8},{label:"固定资产编码",prop:"fixedNumber",type:"text"},{label:"供应商",prop:"companyName",idsStr:"companyId",type:"autocomplete",trigger:"change",placeholder:"可输入关键词查找供应商",seleteOption:this.$store.getters.supplierList},{type:"select",label:"资产分类",prop:"assetTypeId",seleteOption:this.$store.getters.assetTypeList},{label:"品牌",prop:"brand",id:"brand",type:"text"},{label:"资产型号",prop:"goodsModel",type:"text"},{label:"所有人",prop:"staffunName",idsStr:"empId",type:"user",trigger:"change"},{label:"归属部门",prop:"staffunName",idsStr:"depatCode",type:"dept",trigger:"change"},{label:"登记合同",prop:"registerNo",type:"text"},{label:"资产状态",prop:"assetsStatus",type:"select",seleteOption:this.$store.getters["dirtData"]("assets_status"),formatter:function(t){return e.$store.getters["fineDirtDataName"]("assets_status",t)}},{label:"登记状态",prop:"regisStatus",type:"text"},{label:"转移单号",prop:"assShiftNo",type:"text"},{label:"报废单号",prop:"scrappedNo",type:"text"}]},coverList:[],dialogVisible:!1,activeName:"0"}},computed:{},created:function(){this.init()},methods:{init:function(){this.pageType,this.editFormData=Object.assign({},this.formData),"details"==this.pageType&&this.formConfig.itemArr.map((function(e){return e.disabled=!0}))},getFormData:function(){var e=this;return new Promise((function(t,a){e.$refs.editForm.getFormData().then((function(e){e=Object.assign({},e),t(e)})).catch((function(e){a(e)}))}))},getDetails:function(){}}}),l=n,p=(a("e68c"),a("2877")),d=Object(p["a"])(l,r,i,!1,null,"7f6e2816",null),c=d.exports,u=a("fd03");function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(u["a"])({url:"/asset/assetsAction/queryList",method:"post",data:e})}var m={name:"assetParameter",components:{addInfo:c},data:function(){var e=this;return{label:"",maxNum:0,otherInfo:"",showMember:!1,currentItem:{},orgMemberSelect:{},tableConfig:{showFixedHeight:!0,searchObj:{searchMethod:function(t,a){e.tableConfig.tableDataObj&&e.getTableData()},searchArr:[{type:"el-select",label:"资产分类",model:"assetTypeId",option:this.$store.getters.assetTypeList},{type:"el-input",label:"型号",model:"goodsModel",placeholder:"型号"},{type:"el-input",label:"所属人",model:"staffunName",id:"empId",scopeType:"formate",method:function(t){e.chooseStaff("user")},placeholder:"选择所属人"},{type:"el-input",label:"归属部门",model:"depatName",id:"depatCode",scopeType:"formate",method:function(t){e.chooseStaff("dept")},placeholder:"选择归属部门"},{type:"el-input",label:"登记合同号",model:"registerNo",placeholder:"登记合同号"},{type:"el-select",label:"资产状态",model:"assetsStatus",option:this.$store.getters["dirtData"]("assets_status")}]},queryObj:{method:function(){e.getTableData()},queryData:{page:1,pageSize:15}},tableDataObj:{tableArr:[],total:null},operateArr:[{name:"新建",isHide:!0,icon:"el-icon-plus",method:function(t){e.pageType="add"}}],tableObj:{selectionShow:!1,indexShow:!0,tableMethods:{selection:function(t){e.selectionData=t}},showItems:[{name:"IT资产编号",prop:"assetsNumber"},{name:"固定资产编码",prop:"fixedNumber"},{name:"资产分类",prop:"assetTypeName",id:"assetTypeId"},{name:"品牌",prop:"brand",id:"brand",scopeType:"formate",method:function(t){var a=t.brand;return e.$store.getters["fineDirtDataName"]("brand_type",a)||a}},{name:"资产型号",prop:"goodsModel"},{name:"所有人",prop:"staffunName",id:"empId"},{name:"归属部门",id:"depatCode",prop:"depatName"},{name:"登记合同",prop:"registerNo"},{name:"资产状态",prop:"assetsStatus",scopeType:"formate",method:function(t){var a=t.assetsStatus;return e.$store.getters["fineDirtDataName"]("assets_status",a)||a}},{name:"登记状态",prop:"regisStatus",scopeType:"formate",method:function(t){var a=t.regisStatus;return e.$store.getters["fineDirtDataName"]("regis_status",a)||a}},{name:"转移单号",prop:"assShiftNo"},{name:"报废单号",prop:"scrappedNo"},{name:"操作",prop:"operate",width:100,scopeType:"button",fixed:"right",buttonArr:[{name:"详情",method:function(t){e.detailsInfo(t)},isShow:function(e,t){return!0},icon:"false"}]}]},paginationObj:{pageSizes:[15,30,50,100]},paginationIsshow:!0,showklTable:!1},pageType:"list",selectType:null,formData:{}}},watch:{pageType:function(e){"list"===e&&this.getTableData()}},computed:{rightBtnArr:function(){var e=this,t=[{text:"保存",icon:"el-icon-finished",hide:"details"==this.pageType,methods:function(){e.doSubmit()}}];return t}},mounted:function(){this.getTableData()},methods:{getTableData:function(){var e=this,t=Object.assign({},this.tableConfig.queryObj.queryData);t.pageCount=t.pageSize,this.$delete(t,"pageSize"),f(t).then((function(t){e.$set(e.tableConfig.tableDataObj,"tableArr",t.data.list||[]),e.$set(e.tableConfig.tableDataObj,"total",t.data.total||0)})).catch((function(t){e.$set(e.tableConfig.tableDataObj,"tableArr",[]),e.$set(e.tableConfig.tableDataObj,"total",0)}))},chooseStaff:function(e){var t=e.split("-")[0],a=e.split("-")[1];this.selectType=t,"dept"==t?this.orgMemberSelect={seleteType:a||"org",radio:"dept"==t,props:{label:"organizationName",children:"children"},column:[{label:"组织",prop:"name"}],chosedData:[]}:"user"==t&&(this.orgMemberSelect={seleteType:a||"orgmember",radio:"user"==t,props:{label:"organizationName",children:"children"},column:[{label:"姓名",prop:"name",width:60}],chosedData:[]}),this.showMember=!0},chooseUser:function(){var e=this.$refs.orgMemberSelect.getSeleteData(),t=e[0];"dept"==this.selectType?t&&(this.$set(this.tableConfig.queryObj.queryData,"depatName",t.name),this.$set(this.tableConfig.queryObj.queryData,"depatCode",t.id)):"user"==this.selectType&&t&&(this.$set(this.tableConfig.queryObj.queryData,"staffunName",t.name),this.$set(this.tableConfig.queryObj.queryData,"empId",t.id)),this.showMember=!1},addSeleteMember:function(){var e=this.$Vue,t=this.selections;e.$refs["tabs"+this.tabname][0].setTableData(t),this.showMember=!1},detailsInfo:function(e){this.pageType="details",this.formData=Object.assign({},e)},doSubmit:function(){var e=this;this.$refs.editForm.getFormData().then((function(t){e.addMethons(t).then((function(a){e.$message.success("操作成功！"),t.id||(e.formData={id:a.data}),e.pageType="list",e.getTableData()}))})).catch((function(e){console.log(e)}))},addMethons:function(e){return this.$delete(e,"staffunName"),e.id?new Promise((function(t,a){updateRegist(e).then((function(e){t(e)})).catch((function(e){console.log(e),a(e)}))})):new Promise((function(t,a){addRegist(e).then((function(e){t(e)})).catch((function(e){console.log(e),a(e)}))}))},goBackPage:function(e){this.pageType="list"}}},h=m,b=Object(p["a"])(h,s,o,!1,null,null,null);t["default"]=b.exports},e68c:function(e,t,a){"use strict";var s=a("38ed"),o=a.n(s);o.a}}]);
//# sourceMappingURL=chunk-da970af0.14fdc8fd.js.map