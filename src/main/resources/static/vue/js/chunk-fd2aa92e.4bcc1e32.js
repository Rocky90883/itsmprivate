(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fd2aa92e"],{"361e":function(e,t,n){},"440f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"emergencyPlan h100"},[n("div",{staticClass:"page-main-box"},[n("add-info",{ref:"editForm"})],1)])},i=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"standardSupplies h100"},[n("el-row",{staticClass:"h100"},[n("el-col",{staticClass:"pd-r10 h100",attrs:{span:6}},[n("assetsTree",{ref:"orgTree",attrs:{treeSetting:e.deptTreeSetting,haveRemark:!0,hideBtn:e.hideBtn},on:{handleClickTree:e.handleClickTree,save:e.saveAssetsType,delete:e.deleteAssetsType}})],1),n("el-col",{staticClass:"h100",attrs:{span:18}},[n("KlTable",e._b({ref:"klTable"},"KlTable",e.tableConfig,!1))],1)],1)],1)},r=[],o=n("bf0b"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"assetsTree"},[n("div",{staticClass:"edit-tree-toolbar"},[n("div",[e._v(e._s(e.title))]),e.hideBtn?e._e():n("div",{staticClass:"edit-btn"},[e._l(e.btnConfig,(function(t,a){return[e.showBtn(t.name)?n("el-button",{key:a,staticClass:"btn-text-blue",attrs:{size:"mini",icon:t.icon},on:{click:t.methons}},[e._v(e._s(t.text))]):e._e()]}))],2)]),n("div",{staticClass:"edit-tree-content"},[n("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.treeConfig.data,"node-key":"id",props:e.defaultProps,"expand-on-click-node":e.clickExpand,"default-expand-all":"","highlight-current":""},on:{"node-click":e.treeNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",[e._v(e._s(a.label))]),e.currentNode.id!==i.id||e.hideBtn||-1===i.id?e._e():n("span",[n("el-button",{staticClass:"btnIcon",attrs:{type:"text",icon:"el-icon-plus"},nativeOn:{click:function(t){return function(){return e.TNodeAdd(a,i)}()}}}),n("el-button",{staticClass:"btnIcon",attrs:{type:"text",icon:"el-icon-edit-outline"},nativeOn:{click:function(t){return function(){return e.TNodeEdit(a,i)}()}}}),n("el-button",{staticClass:"btnIcon",attrs:{type:"text",icon:"el-icon-delete"},nativeOn:{click:function(t){return function(){return e.TNodeDel(a,i)}()}}})],1)])}}])})],1),e.show?n("dialogPublic",{attrs:{title:e.title,show:e.show},on:{"update:show":function(t){e.show=t},doSubmit:e.doSubmit,doClose:e.doClose}},[n("editForm",{ref:"editForm",attrs:{formConfig:e.formConfig,formData:e.editFormData}})],1):e._e()],1)},l=[],d=(n("7db0"),n("c975"),n("d81d"),n("b0c0"),{props:["treeSetting","haveRemark","hideBtn"],data:function(){var e=this,t=[{id:1,label:"一级 1",children:[{id:4,label:"二级 1-1",children:[{id:9,label:"三级 1-1-1"},{id:10,label:"三级 1-1-2"}]}]},{id:2,label:"一级 2",children:[{id:5,label:"二级 2-1"},{id:6,label:"二级 2-2"}]},{id:3,label:"一级 3",children:[{id:7,label:"二级 3-1"},{id:8,label:"二级 3-2"}]}];return{title:"树标题",treeConfig:{select:!0,data:JSON.parse(JSON.stringify(t))},btnConfig:[{name:"add",text:"根节点",icon:"el-icon-plus",methons:function(){e.add()}},{name:"edit",text:"编辑",icon:"el-icon-edit",methons:function(){e.edit()}},{name:"delete",text:"删除",icon:"el-icon-delete",methons:function(){e.delete()}}],btnArr:[],defaultProps:{children:"children",label:"orgName"},currentNode:{},show:!1,formConfig:{itemArr:[{label:"父节点",prop:"parentName",type:"text",disabled:!0,span:24},{label:"节点名称",prop:"typename",type:"text",span:24,required:!0},{label:"节点编码",prop:"typecode",type:"text",span:24,required:!0},{label:"排序",prop:"sort",type:"number",span:24,required:!0}]},editFormData:{},remarkItem:{label:"备注",prop:"remark",type:"text",span:24}}},created:function(){this.init()},watch:{treeSetting:{handler:function(e){this.$set(this.treeConfig,"data",e.data||[])},deep:!0}},methods:{init:function(){var e=this.treeSetting,t=e.btnArr,n=e.title,a=e.data,i=e.defaultProps,s=e.clickExpand;this.btnArr=t||[],this.clickExpand=s||!1,this.defaultProps=Object.assign({},this.defaultProps,i),this.title=n||"",this.$set(this.treeConfig,"data",a||[]),this.haveRemark&&this.formConfig.itemArr.push(this.remarkItem)},showBtn:function(e){return-1!=this.btnArr.indexOf(e)},add:function(){this.show=!0},edit:function(e){},delete:function(){},getFormData:function(){var e=this.treeConfig.data;return e.map((function(e){return delete e.rowIndex})),e},treeNodeClick:function(e){this.currentNode=JSON.parse(JSON.stringify(e)),this.$emit("handleClickTree",e)},doSubmit:function(){var e=this;this.$refs.editForm.getFormData().then((function(t){e.$emit("save",t)}))},doClose:function(){this.show=!1},TNodeAdd:function(e,t){this.show=!0;var n=t.id,a=(t.name,t.parentId,t.classcode);this.editFormData={parentcode:a,parentid:n}},TNodeEdit:function(e,t){var n=this,a={typename:t.name};Object(o["d"])(a).then((function(e){var t=e.data.list[0];n.editFormData=Object.assign({},t)})),this.show=!0},TNodeDel:function(e,t){var n=this;this.$confirm("此操作将删除【"+t.orgName+"】, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.$emit("delete",t.id)})).catch((function(e){}))},setNoNode:function(){this.$refs.tree.setCurrentKey(null),this.currentNode={}},getCurrentKey:function(){return this.$refs.tree.getCurrentKey()},setTreeData:function(e){var t=this;this.$set(this.treeConfig,"data",e),setTimeout((function(){var n={};if(e.length){var a=t.$utils.convert_tree_data(e),i=a.find((function(e){return e.id==t.currentNode.id}));n=i?t.currentNode:e[0]}t.$refs.tree.setCurrentKey(n.id),t.treeNodeClick(n)}),0)},choseDialog:function(){this.show=!1}}}),u=d,h=(n("7a3e"),n("ead1"),n("2877")),f=Object(h["a"])(u,c,l,!1,null,"71b5ab9a",null),p=f.exports,b={components:{assetsTree:p},data:function(){var e=this;return{deptTreeSetting:{title:"资产分类",select:!0,btnArr:["add"],defaultProps:{children:"children",label:"name"}},tableConfig:{showFixedHeight:!0,searchObj:{searchMethod:function(t,n){e.tableConfig.tableDataObj&&e.getTableData()},searchArr:[{type:"el-input",label:"资产类型",model:"typename",placeholder:"请输入资产类型名称"}]},queryObj:{method:function(){e.getTableData()},queryData:{parentid:"",page:1,pageSize:15}},tableDataObj:{tableArr:[],total:null},operateArr:[{name:"新建",isHide:!0,icon:"el-icon-plus",method:function(t){e.toAdd()}}],tableObj:{selectionShow:!1,indexShow:!0,tableMethods:{selection:function(t){e.selectionData=t}},showItems:[{name:"资产编码",prop:"typecode"},{name:"资产类型",prop:"typename",width:100},{name:"排序",prop:"sort"}]},paginationObj:{pageSizes:[15,30,50,100]},paginationIsshow:!0,showklTable:!1},currentTreeNode:{},hideBtn:!1}},watch:{currentTreeNode:function(e){var t=e.id||"";this.getTableData(t)}},created:function(){this.getAssetsType()},methods:{handleClickTree:function(e){this.currentTreeNode=Object.assign({},e)},getAssetsType:function(){var e=this;Object(o["c"])().then((function(t){e.$refs.orgTree.setTreeData(t.data.children)}))},saveAssetsType:function(e){var t=this;try{e.id?Object(o["e"])(e).then((function(e){t.getAssetsType()})):Object(o["a"])(e).then((function(e){t.getAssetsType()})),this.$message.success("保存成功！"),this.$refs.orgTree.doClose()}catch(n){this.$message.success("保存失败！"),console.log(n)}},deleteAssetsType:function(e){var t=this;Object(o["b"])({id:e}).then((function(e){t.getAssetsType(),t.currentTreeNode={},t.$message.success("删除成功！")}))},getTableData:function(e){var t=this,n=Object.assign({},this.tableConfig.queryObj.queryData);n.parentid=e,n.pageCount=n.pageSize,void 0===n.parentid&&(n.parentid=""),this.$delete(n,"pageSize"),Object(o["d"])(n).then((function(e){t.$set(t.tableConfig.tableDataObj,"tableArr",e.data.list||[]),t.$set(t.tableConfig.tableDataObj,"total",e.data.total||0)})).catch((function(e){t.$set(t.tableConfig.tableDataObj,"tableArr",[]),t.$set(t.tableConfig.tableDataObj,"total",0)}))}}},m=b,g=(n("9e77"),Object(h["a"])(m,s,r,!1,null,null,null)),v=g.exports,T={components:{addInfo:v},data:function(){return{crumbsData:{}}},mounted:function(){},methods:{}},C=T,y=Object(h["a"])(C,a,i,!1,null,null,null);t["default"]=y.exports},"7a3e":function(e,t,n){"use strict";var a=n("361e"),i=n.n(a);i.a},"88c3":function(e,t,n){},"9e77":function(e,t,n){"use strict";var a=n("88c3"),i=n.n(a);i.a},bf0b:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return c}));var a=n("fd03");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["a"])({url:"/asset/assetTypeAction/queryList",method:"post",data:e})}function s(){return Object(a["a"])({url:"/asset/assetTypeAction/assetTypeTree",method:"get"})}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["a"])({url:"/asset/assetTypeAction/addassettype",method:"post",data:e})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["a"])({url:"/asset/assetTypeAction/deleteAssetType",method:"post",data:e})}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["a"])({url:"/asset/assetTypeAction/updateAssetType",method:"post",data:e})}},cf35:function(e,t,n){},ead1:function(e,t,n){"use strict";var a=n("cf35"),i=n.n(a);i.a}}]);
//# sourceMappingURL=chunk-fd2aa92e.4bcc1e32.js.map