{"version":3,"sources":["webpack:///./src/views/itService/serviceRecord/index.vue?9bdf","webpack:///./src/views/itService/serviceRecord/addRecordDialog.vue?9a56","webpack:///src/views/itService/serviceRecord/addRecordDialog.vue","webpack:///./src/views/itService/serviceRecord/addRecordDialog.vue?e7e1","webpack:///./src/views/itService/serviceRecord/addRecordDialog.vue","webpack:///./src/api/itService/serviceRecord.js","webpack:///src/views/itService/serviceRecord/index.vue","webpack:///./src/views/itService/serviceRecord/index.vue?3129","webpack:///./src/views/itService/serviceRecord/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_b","ref","tableConfig","attrs","recordDialog","on","$event","recordSubmit","recordData","pageType","staticRenderFns","formConfig","editFormData","props","type","Object","default","String","name","data","itemArr","watch","assign","val","init","created","methods","map","getFormData","Promise","component","getListApi","request","url","method","deleteApi","id","params","addApi","updateApi","components","label","currentItem","showFixedHeight","searchObj","searchMethod","searchArr","queryObj","queryData","page","pageSize","tableDataObj","tableArr","total","operateArr","tableObj","selectionShow","indexShow","tableMethods","selection","showItems","paginationObj","pageSizes","paginationIsshow","showklTable","getTableData","mounted","toAdd","form","pageCount","billDate","beginDate","endDate","$delete","detailsInfo","row","editInfo","deleteInfo","$confirm","confirmButtonText","cancelButtonText","console","log","e","addRecord","addMethons"],"mappings":"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","file":"js/chunk-2d219fc8.05e856c6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"assetRegister h100\"},[_c('div',{staticClass:\"page-main-box\"},[_c('KlTable',_vm._b({ref:\"klTable\"},'KlTable',_vm.tableConfig,false))],1),_c('dialogPublic',{attrs:{\"title\":'新增服务记录',\"show\":_vm.recordDialog,\"appendTobody\":\"\",\"width\":\"800px\",\"height\":\"400px\"},on:{\"update:show\":function($event){_vm.recordDialog=$event},\"doSubmit\":_vm.recordSubmit,\"doClose\":function () { return (_vm.recordDialog = false); }}},[_c('addRecordDialog',{ref:\"distributionFrom\",attrs:{\"recordData\":_vm.recordData,\"pageType\":_vm.pageType}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"distributionDialog\"},[_c('editForm',{ref:\"editForm\",attrs:{\"formConfig\":_vm.formConfig,\"formData\":_vm.editFormData}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"distributionDialog\">\r\n    <editForm :formConfig=\"formConfig\" ref=\"editForm\" :formData=\"editFormData\">\r\n    </editForm>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    recordData: {\r\n      type: Object,\r\n      default: {}\r\n    },\r\n    pageType: {\r\n      type: String,\r\n      default: \"\"\r\n    }\r\n  },\r\n  name: \"distributionDialog\",\r\n  data() {\r\n    return {\r\n      editFormData: {},\r\n      formConfig: {\r\n        itemArr: [\r\n          {\r\n            label: \"记录日期\",\r\n            prop: \"billDate\",\r\n            type: \"date\",\r\n            // required: true,\r\n            span: 24\r\n          },\r\n          {\r\n            label: \"记录人\",\r\n            prop: \"empName\",\r\n            idsStr: \"employeeId\",\r\n            type: \"user\",\r\n            trigger: \"change\",\r\n            // required: true,\r\n            span: 24\r\n          },\r\n          {\r\n            label: \"服务记录类型\",\r\n            prop: \"apptype\",\r\n            type: \"select\",\r\n            seleteOption: this.$store.getters[\"dirtData\"](\"record_type\"),\r\n            formatter: val => {\r\n              return this.$store.getters[\"fineDirtDataName\"](\r\n                \"record_type\",\r\n                val\r\n              );\r\n            },\r\n            // required: true,\r\n            span: 24\r\n          },\r\n          {\r\n            label: \"来访电话\",\r\n            prop: \"phone\",\r\n            // required: true,\r\n            type: \"text\",\r\n            span: 24,\r\n            // placeholder: \"选择申请人后自动带出\",\r\n            rules: {\r\n              validator: function(rule, value, callback) {\r\n                const reg = /^[0-9]*$/;\r\n                if (!value) {\r\n                  // return callback(new Error(\"请填写手机号码！\"));\r\n                } else if (!reg.test(value)) {\r\n                  return callback(new Error(\"请填写正确的手机号码！\"));\r\n                } else {\r\n                  callback();\r\n                }\r\n              },\r\n              trigger: \"change\"\r\n            }\r\n          }, \r\n          {\r\n            label: \"登记描述\",\r\n            prop: \"appContent\",\r\n            type: \"textarea\",\r\n            span: 24,\r\n            rows: 4\r\n          },\r\n          {\r\n            label: \"备注\",\r\n            prop: \"remark\",\r\n            type: \"textarea\",\r\n            span: 24,\r\n            rows: 4\r\n          },\r\n\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  watch:{\r\n    recordData(val){\r\n      this.editFormData = Object.assign({}, val);\r\n    },\r\n    pageType(val){\r\n      this.init();\r\n    }\r\n\r\n  },\r\n  created() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      if(this.pageType == \"details\"){\r\n        this.formConfig.itemArr.map(i => (i.disabled = true));\r\n      }else{\r\n        this.formConfig.itemArr.map(i => (i.disabled = false));\r\n      }\r\n      this.editFormData = Object.assign({}, this.recordData);\r\n    },\r\n    //获取表单数据\r\n    getFormData() {\r\n      let This = this;\r\n      return new Promise((resolve, reject) => {\r\n        this.$refs.editForm\r\n          .getFormData()\r\n          .then(data => {\r\n            data = Object.assign({}, data);\r\n            resolve(data);\r\n          })\r\n          .catch(e => {\r\n            reject(e);\r\n          });\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addRecordDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addRecordDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./addRecordDialog.vue?vue&type=template&id=00c76cae&\"\nimport script from \"./addRecordDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./addRecordDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import request from '@/request/api'\r\n/**===========基本信息接口 */\r\n//列表\r\nexport function getListApi(data = {}) {\r\n    return request({\r\n        url: '/workorder/RecordappAction/queryList.htm',\r\n        method: 'post',\r\n        data: data\r\n    })\r\n}\r\n//详情\r\nexport function getDetailsApi(id = \"\") {\r\n    return request({\r\n        url: '/workorder/RecordappAction/detail.htm',\r\n        method: 'post',\r\n        params:{ id: id }\r\n    })\r\n}\r\n//删除\r\nexport function deleteApi(id = \"\") {\r\n    return request({\r\n        url: '/workorder/RecordappAction/delete.htm',\r\n        method: 'post',\r\n        params: { id: id }\r\n    })\r\n}\r\n\r\n//新增\r\nexport function addApi(data = {}) {\r\n    return request({\r\n        url: '/workorder/RecordappAction/addRecordapp.htm',\r\n        method: 'post',\r\n        data: data\r\n    })\r\n}\r\n//编辑\r\nexport function updateApi(data = {}) {\r\n    return request({\r\n        url: '/workorder/RecordappAction/updateRecordapp.htm',\r\n        method: 'post',\r\n        data: data\r\n    })\r\n}\r\n\r\n\r\n","<template>\r\n  <div class=\"assetRegister h100\">\r\n    <!-- <publicCrumbs :crumbsData=\"crumbsData\"></publicCrumbs> -->\r\n    <div class=\"page-main-box\">\r\n      <KlTable\r\n        v-bind=\"tableConfig\"\r\n        ref=\"klTable\"\r\n      ></KlTable>\r\n    </div>\r\n    <dialogPublic\r\n      :title=\"'新增服务记录'\"\r\n      :show.sync=\"recordDialog\"\r\n      @doSubmit=\"recordSubmit\"\r\n      @doClose=\"() => (recordDialog = false)\"\r\n      appendTobody\r\n      width=\"800px\"\r\n      height=\"400px\"\r\n    >\r\n      <addRecordDialog \r\n      :recordData=\"recordData\" \r\n      ref=\"distributionFrom\" \r\n      :pageType=\"pageType\">\r\n      </addRecordDialog>\r\n    </dialogPublic>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport addRecordDialog from \"./addRecordDialog\";\r\nimport {\r\n  getListApi, //获取列表\r\n  deleteApi, //删除\r\n  addApi, //添加\r\n  updateApi //修改\r\n} from \"@/api/itService/serviceRecord\";\r\n\r\nexport default {\r\n  name: \"assetRegister\",\r\n  components: {addRecordDialog},\r\n  data() {\r\n    return {\r\n      label: \"\",\r\n      currentItem: {},\r\n      recordDialog:false,\r\n      recordData: {},\r\n      tableConfig: {\r\n        showFixedHeight: true,\r\n        searchObj: {\r\n          searchMethod: (params, that) => {\r\n            if (this.tableConfig.tableDataObj) {\r\n              this.getTableData();\r\n            } else {\r\n            }\r\n          },\r\n          searchArr: [\r\n            {\r\n              type: \"daterange\",\r\n              label: \"日期选择\",\r\n              model: \"billDate\"\r\n            },\r\n            {\r\n              type: \"el-select\",\r\n              label: \"记录类型\",\r\n              model: \"apptype\",\r\n              // id:\"apptype\",\r\n              option: this.$store.getters[\"dirtData\"](\"record_type\")\r\n            },\r\n            {\r\n              type: \"el-input\",\r\n              label: \"记录人名称\",\r\n              model: \"empName\",\r\n              placeholder: \"记录人名称\"\r\n            }\r\n          ]\r\n        },\r\n        // 查询条件参数\r\n        queryObj: {\r\n          method: () => {\r\n            this.getTableData();\r\n          },\r\n          queryData: {\r\n            page: 1,\r\n            pageSize: 15 //pageCount\r\n          }\r\n        },\r\n        tableDataObj: {\r\n          tableArr: [],\r\n          total: null\r\n        },\r\n        operateArr: [\r\n          {\r\n            name: \"新建\",\r\n            // isHide: !this.$store.getters[\"isBtnAuth\"](\"insert\"),\r\n            icon: \"el-icon-plus\",\r\n            method: name => {\r\n              this.toAdd();\r\n            }\r\n          }\r\n        ],\r\n        //  table表配置参数\r\n        tableObj: {\r\n          // 左边选择框展示\r\n          selectionShow: false,\r\n          // 左边序号展示\r\n          indexShow: true,\r\n          // table表事件参数配置\r\n          tableMethods: {\r\n            selection: val => {\r\n              this.selectionData = val;\r\n            }\r\n          },\r\n          /* selectableMethod(row, index) {\r\n            let value = row.isAffirm;\r\n            return value == 0 ? true : value == 1 ? false : true;\r\n          }, */\r\n          // table表展示列配置\r\n          showItems: [\r\n            {\r\n              name: \"服务单号\",\r\n              prop: \"orderNo\"\r\n              // width: 150\r\n              // align: \"left\",\r\n            },\r\n            {\r\n              name: \"来访电话\",\r\n              prop: \"phone\"\r\n              // align: \"left\",\r\n            },\r\n            {\r\n              name: \"服务记录类型\",\r\n              prop: \"apptype\",\r\n              // width: 150,\r\n              // align: \"center\",\r\n              scopeType: \"formate\",\r\n              method: row => {\r\n                let value = row.apptype;\r\n                return this.$store.getters[\"fineDirtDataName\"](\r\n                  \"record_type\",\r\n                  value\r\n                );\r\n              }\r\n            },\r\n            {\r\n              name: \"记录人\",\r\n              prop: \"empName\",\r\n              id: \"employeeId\"\r\n              // width: 70\r\n            },\r\n            {\r\n              name: \"记录日期\",\r\n              prop: \"billDate\"\r\n              // width: 140\r\n            },\r\n            {\r\n              name: \"备注\",\r\n              prop: \"remark\"\r\n              // width: 150\r\n              // align: \"left\"\r\n            },\r\n            {\r\n              name: \"操作\",\r\n              prop: \"operate\",\r\n              width: 150,\r\n              scopeType: \"button\",\r\n              fixed: \"right\",\r\n              buttonArr: [\r\n                //最后一行操作栏数组\r\n                {\r\n                  name: \"详情\",\r\n                  method: row => {\r\n                    this.detailsInfo(row);\r\n                  },\r\n                  isShow: (row, that) => {\r\n                    return true;\r\n                    // return this.$store.getters[\"isBtnAuth\"](\"details\");\r\n                  },\r\n                  icon: \"false\"\r\n                },\r\n                {\r\n                  name: \"编辑\",\r\n                  method: row => {\r\n                    this.editInfo(row);\r\n                  },\r\n                  isShow: (row, that) => {\r\n                    return true;\r\n                    // return this.$store.getters[\"isBtnAuth\"](\"update\");\r\n                  },\r\n                  icon: \"false\"\r\n                },\r\n                {\r\n                  name: \"删除\",\r\n                  method: row => {\r\n                    this.deleteInfo(row);\r\n                  },\r\n                  isShow: (row, that) => {\r\n                    return true;\r\n                    // return this.$store.getters[\"isBtnAuth\"](\"delete\");\r\n                  },\r\n                  icon: \"false\"\r\n                }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        // 分页展示总条配置\r\n        paginationObj: {\r\n          pageSizes: [15, 30, 50, 100]\r\n        },\r\n        paginationIsshow: true,\r\n        showklTable: false\r\n      },\r\n      pageType: \"list\",\r\n    };\r\n  },\r\n  watch: {\r\n    pageType(val) {\r\n      if (val === \"list\") {\r\n        this.getTableData();\r\n      }\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.getTableData();\r\n  },\r\n  methods: {\r\n    //新建\r\n    toAdd() {\r\n      this.pageType = \"add\";\r\n      this.recordData = {};\r\n      this.recordDialog = true;\r\n    },\r\n    //查询数据\r\n    getTableData() {\r\n      let form = Object.assign({}, this.tableConfig.queryObj.queryData);\r\n      form.pageCount = form.pageSize;\r\n      let { billDate } = form;\r\n      if (billDate) {\r\n        let [beginDate, endDate] = billDate;\r\n        form.beginDate = beginDate;\r\n        form.endDate = endDate;\r\n      }\r\n      this.$delete(form, \"billDate\");\r\n      this.$delete(form, \"pageSize\");\r\n      this.$delete(form, \"staffunName\");\r\n      getListApi(form)\r\n        .then(res => {\r\n          this.$set(\r\n            this.tableConfig.tableDataObj,\r\n            \"tableArr\",\r\n            res.data.list || []\r\n          );\r\n          this.$set(\r\n            this.tableConfig.tableDataObj,\r\n            \"total\",\r\n            res.data.total || 0\r\n          );\r\n        })\r\n        .catch(res => {\r\n          this.$set(this.tableConfig.tableDataObj, \"tableArr\", []);\r\n          this.$set(this.tableConfig.tableDataObj, \"total\", 0);\r\n        });\r\n    },\r\n\r\n    //详情\r\n    detailsInfo(row) {\r\n      // console.log(row);\r\n      this.pageType = \"details\";\r\n      this.recordData = row || {};\r\n      this.recordDialog = true;\r\n    },\r\n    //编辑\r\n    editInfo(row) {\r\n      this.recordData = row || {};\r\n      this.pageType = \"edit\";\r\n      this.recordDialog = true;\r\n    },\r\n\r\n    //删除\r\n    deleteInfo(row) {\r\n      this.$confirm(`是否确认删除`, \"提示\", {\r\n        // this.$confirm(`是否删除【${row.trainingName}】`, \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      })\r\n        .then(() => {\r\n          deleteApi(row.id).then(res => {\r\n            this.$message.success(\"操作成功\");\r\n            this.getTableData();\r\n          });\r\n        })\r\n        .catch(e => {});\r\n    },\r\n    //新增服务记录\r\n    recordSubmit(){\r\n      if (this.pageType == \"details\"){\r\n        this.recordDialog = false;\r\n      }else{\r\n         this.$refs.distributionFrom\r\n        .getFormData()\r\n        .then(data => {\r\n          this.addRecord(data).then(res => {\r\n            this.$message.success(\"操作成功！\");\r\n            this.recordDialog = false;\r\n            this.pageType = \"list\";\r\n            this.getTableData();\r\n          });\r\n\r\n        })\r\n        .catch(e => {\r\n          console.log(e);\r\n        });\r\n      }\r\n    },\r\n    //新增服务记录\r\n    addRecord(data){\r\n      // console.log(data);\r\n      const actionApi = queryData => {\r\n            //addApi\r\n            return queryData.orderNo ? updateApi(queryData) : addApi(queryData);\r\n      };\r\n      return new Promise((resolve, reject) => {\r\n          actionApi(data)\r\n              .then((res) => {\r\n                resolve(res);\r\n              })\r\n              .catch((e) => {\r\n                console.log(e);\r\n                reject(e);\r\n              });\r\n        });\r\n    },\r\n    // //点击提交\r\n    // doSubmit() {\r\n    //   this.$refs.editAddForm\r\n    //     .getFormData()\r\n    //     .then(data => {\r\n    //       this.addMethons(data).then(res => {\r\n    //         this.$message.success(\"保存成功！\");\r\n    //         if (!data.id) {\r\n    //           this.formData = { id: res.data };\r\n    //         }\r\n    //         this.pageType = \"list\";\r\n    //         this.getTableData();\r\n    //         // this.pageType = \"edit\";\r\n    //         // this.$refs.editForm.getDetails(this.formData.id);\r\n    //       });\r\n    //     })\r\n    //     .catch(e => {\r\n    //       console.log(e);\r\n    //     });\r\n    // },\r\n    //新增\r\n    addMethons(data) {\r\n      this.$delete(data, \"staffunName\"); //删除采购人名字\r\n      this.$delete(data, \"overQty\"); //新建以及编辑的时候不传分配数量\r\n\r\n      if (data.id) {\r\n        //有ID则为修改\r\n        return new Promise((resolve, reject) => {\r\n          updateApi(data)\r\n            .then(res => {\r\n              resolve(res);\r\n            })\r\n            .catch(e => {\r\n              console.log(e);\r\n              reject(e);\r\n            });\r\n        });\r\n      } else {\r\n        //新增\r\n        return new Promise((resolve, reject) => {\r\n          addApi(data)\r\n            .then(res => {\r\n              resolve(res);\r\n            })\r\n            .catch(e => {\r\n              console.log(e);\r\n              reject(e);\r\n            });\r\n        });\r\n      }\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=12eaafc1&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}