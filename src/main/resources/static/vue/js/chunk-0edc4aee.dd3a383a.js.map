{"version":3,"sources":["webpack:///./src/views/itService/usersApply/add.vue?4a00","webpack:///src/views/itService/usersApply/add.vue","webpack:///./src/views/itService/usersApply/add.vue?940c","webpack:///./src/views/itService/usersApply/add.vue","webpack:///./src/api/itService/usersApply.js","webpack:///./src/views/itService/usersApply/index.vue?47f6","webpack:///src/views/itService/usersApply/index.vue","webpack:///./src/views/itService/usersApply/index.vue?9fda","webpack:///./src/views/itService/usersApply/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","ref","formConfig","editFormData","status","scoreSetting","scoreHideBtn","showScore","on","$event","_e","attachSetting","hideBtn","pageType","beforeSubmit","workFlowParams","workFlowSuccess","staticRenderFns","props","formData","type","Object","default","String","defaultSet","Boolean","data","hadSeleteData","trainingType","itemArr","procInstType","title","select","billType","sourceId","btnArr","coverList","dialogVisible","activeName","methods","computed","workflowIsApprover","assignercodes","confirmMan","isWorkFlowEdit","mounted","init","defaultForm","assign","billDate","$utils","getNowDay","getDetails","id","map","submitBefore","Promise","$emit","getFormData","$refs","editForm","component","getListApi","request","url","method","getDetailsApi","params","deleteApi","addApi","updateApi","_b","directives","name","rawName","value","expression","tableConfig","rightBtnArr","goBackPage","showMember","chooseUser","orgMemberSelect","otherInfo","components","label","currentItem","showFixedHeight","searchObj","searchMethod","searchArr","queryObj","queryData","page","pageSize","tableDataObj","tableArr","total","operateArr","tableObj","selectionShow","indexShow","tableMethods","selection","showItems","paginationObj","pageSizes","paginationIsshow","showklTable","arr","watch","val","empId","getTableData","toAdd","form","pageCount","beginDate","endDate","$delete","chooseStaff","typePre","seleteType","typeBre","radio","children","column","chosedData","newData","$set","addDistribution","addPortion","addSeleteMember","$Vue","tabname","setTableData","detailsInfo","row","editInfo","score","deleteInfo","$confirm","confirmButtonText","cancelButtonText","doSubmit","addMethons","updateRegist","toExport","daterange","comeinStart","comeinEnd","substring","length","window","open"],"mappings":"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","file":"js/chunk-0edc4aee.dd3a383a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"record__content\"},[_c('div',{staticClass:\"record__baseinfo\"},[_c('dividerTitle',{attrs:{\"title\":'基本信息'}}),_c('editForm',{ref:\"editForm\",attrs:{\"formConfig\":_vm.formConfig,\"formData\":_vm.editFormData}})],1),(_vm.editFormData.status &&\n        _vm.editFormData.status == 1)?_c('div',{staticClass:\"process_score\"},[_c('dividerTitle',{attrs:{\"title\":'评分'}}),(_vm.showScore)?_c('processScore',{attrs:{\"scoreSetting\":_vm.scoreSetting,\"hideBtn\":_vm.scoreHideBtn,\"showScore\":_vm.showScore},on:{\"update:showScore\":function($event){_vm.showScore=$event},\"update:show-score\":function($event){_vm.showScore=$event}}}):_vm._e()],1):_vm._e(),_c('div',{staticClass:\"record__attach\"},[_c('dividerTitle',{attrs:{\"title\":'附件'}}),_c('attachTable',{ref:\"attachFile\",attrs:{\"attachSetting\":_vm.attachSetting,\"hideBtn\":_vm.hideBtn}})],1),(_vm.pageType == 'details' &&\n        _vm.editFormData.status &&\n        _vm.editFormData.status !== 2)?_c('div',{staticClass:\"record__workflow\"},[_c('dividerTitle',{attrs:{\"title\":'工作流'}}),_c('workFlow',{attrs:{\"currentFlowData\":_vm.editFormData,\"beforeSubmit\":_vm.beforeSubmit,\"otherParams\":_vm.workFlowParams},on:{\"submitSuccess\":_vm.workFlowSuccess}})],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"record__content\">\r\n    <div class=\"record__baseinfo\">\r\n      <dividerTitle :title=\"'基本信息'\"></dividerTitle>\r\n      <editForm\r\n        :formConfig=\"formConfig\"\r\n        ref=\"editForm\"\r\n        :formData=\"editFormData\"\r\n      >\r\n      </editForm>\r\n    </div>\r\n    <div class=\"process_score\" v-if=\"editFormData.status &&\r\n          editFormData.status == 1\">\r\n      <dividerTitle :title=\"'评分'\"></dividerTitle>\r\n      <processScore\r\n        v-if=\"showScore\"\r\n        :scoreSetting=\"scoreSetting\"\r\n        :hideBtn=\"scoreHideBtn\"\r\n        :showScore.sync=\"showScore\"\r\n      ></processScore>\r\n    </div>\r\n    <div class=\"record__attach\">\r\n      <dividerTitle :title=\"'附件'\"></dividerTitle>\r\n      <attachTable\r\n        :attachSetting=\"attachSetting\"\r\n        :hideBtn=\"hideBtn\"\r\n        ref=\"attachFile\"\r\n      ></attachTable>\r\n    </div>\r\n\r\n    <div class=\"record__workflow\"\r\n      v-if=\"pageType == 'details' &&\r\n          editFormData.status &&\r\n          editFormData.status !== 2\">\r\n      <dividerTitle :title=\"'工作流'\"></dividerTitle>\r\n      <workFlow\r\n        :currentFlowData=\"editFormData\"\r\n        :beforeSubmit=\"beforeSubmit\"\r\n        :otherParams=\"workFlowParams\"\r\n        @submitSuccess=\"workFlowSuccess\"\r\n      ></workFlow>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getDetailsApi, //获取详情\r\n  updateApi\r\n} from \"@/api/itService/usersApply\";\r\nexport default {\r\n  props: {\r\n    formData: {\r\n      type: Object,\r\n      default: new Object()\r\n    },\r\n    pageType: {\r\n      type: String,\r\n      default: \"\"\r\n    },\r\n    defaultSet: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      \r\n      hadSeleteData:[],\r\n      editFormData: { suitableWorkArr: [] },\r\n      trainingType: {},\r\n      formConfig: {\r\n        itemArr: [\r\n          {\r\n            label: \"申请日期\",\r\n            prop: \"billDate\",\r\n            type: \"date\",\r\n            // required: true,\r\n            span: 8\r\n          },\r\n          {\r\n            label: \"申请人\",\r\n            prop: \"staffunName\",\r\n            idsStr: \"employeeId\",\r\n            type: \"user\",\r\n            trigger: \"change\",\r\n            // required: true,\r\n            methods: obj => {\r\n              let { orgNodeName, orgNodeCode, mobile } = obj[0];\r\n              this.$refs.editForm.setFormItem(\"depatName\", orgNodeName);\r\n              this.$refs.editForm.setFormItem(\"depatCode\", orgNodeCode);\r\n              this.$refs.editForm.setFormItem(\"phone\", mobile);\r\n            }\r\n          },\r\n          {\r\n            label: \"申请部门\",\r\n            prop: \"depatName\",\r\n            id: \"depatCode\",\r\n            placeholder: \"选择申请人后自动带出\",\r\n            // required: true,\r\n            type: \"text\"\r\n          },\r\n          {\r\n            label: \"联系号码\",\r\n            prop: \"phone\",\r\n            // required: true,\r\n            type: \"text\",\r\n            placeholder: \"选择申请人后自动带出\",\r\n            rules: {\r\n              validator: function(rule, value, callback) {\r\n                const reg = /^[0-9]*$/;\r\n                if (!value) {\r\n                  // return callback(new Error(\"请填写手机号码！\"));\r\n                } else if (!reg.test(value)) {\r\n                  return callback(new Error(\"请填写正确的手机号码！\"));\r\n                } else {\r\n                  callback();\r\n                }\r\n              },\r\n              trigger: \"change\"\r\n            }\r\n          }, //申请类型\r\n          {\r\n            type: \"select\",\r\n            label: \"申请类型\", //acc_type\r\n            prop: \"apptype\",\r\n            // id: \"apptype\",\r\n            // required: true,\r\n            seleteOption: this.$store.getters[\"dirtData\"](\"acc_type\"),\r\n            formatter: val => {\r\n              return this.$store.getters[\"fineDirtDataName\"](\"acc_type\", val);\r\n            }\r\n          },\r\n          {\r\n            type: \"select\",\r\n            label: \"业务类型\",\r\n            prop: \"appsysName\",\r\n            id: \"appsysId\",//msg_type\r\n            // required: true,\r\n            seleteOption: this.$store.getters[\"dirtData\"](\"msg_type\"),\r\n            formatter: val => {\r\n              return this.$store.getters[\"fineDirtDataName\"](\"msg_type\", val);\r\n            }\r\n          },\r\n          {\r\n            label: \"审批人\",\r\n            prop: \"confirmManName\",\r\n            idsStr: \"confirmMan\",\r\n            type: \"user\",\r\n            isHide: this.pageType == \"details\" && !this.isWorkFlowEdit,\r\n            // required: true,\r\n            trigger: \"change\"\r\n          },\r\n          {\r\n            label: \"申请描述\",\r\n            prop: \"appContent\",\r\n            type: \"textarea\",\r\n            span: 24,\r\n            rows: 4\r\n          },\r\n          {\r\n            label: \"备注\",\r\n            prop: \"remark\",\r\n            type: \"textarea\",\r\n            span: 24,\r\n            rows: 4\r\n          }\r\n        ]\r\n      },\r\n      procInstType:null,\r\n      //附件设置\r\n      attachSetting: {\r\n        title: \"\",\r\n        select: false,\r\n        billType: this.procInstType, //页面标识\r\n        sourceId: \"\", //单据的ID\r\n        btnArr: [\"add\", \"delete\", \"save\"]\r\n      },\r\n      //评分设置\r\n      scoreSetting: {\r\n        title: \"\",\r\n        billType: \"asset_regist\", //页面标识\r\n        sourceId: \"\", //单据的ID\r\n        data:[],\r\n        btnArr: [\"save\"]\r\n      },\r\n      scoreHideBtn:false,\r\n      coverList: [],\r\n      dialogVisible: false,\r\n      activeName: \"0\",\r\n      hideBtn: false,\r\n      showScore: false,\r\n      beforeSubmit: {\r\n        //工作流提交前检测\r\n        methods: data => {\r\n          return this.submitBefore(data);\r\n        }\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    //工作流额外参数\r\n    workFlowParams() {\r\n      let { procInstType } = this.editFormData;\r\n      if (this.formData.status === 4 && this.formData.workflowIsApprover) {\r\n        return {\r\n          procInstType: procInstType || \"\",\r\n          assignercodes: [this.editFormData.confirmMan]\r\n        };\r\n      }\r\n      return { procInstType: procInstType || \"\" };\r\n    },\r\n    //是否是流程中可编辑\r\n    isWorkFlowEdit() {\r\n      if (this.formData.status === 4 && this.formData.workflowIsApprover) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      //row.status\r\n      if (this.pageType == \"add\") {\r\n        let defaultForm = {};\r\n        if (this.defaultSet) {\r\n          defaultForm = { ...this.formData };\r\n        }\r\n        this.editFormData = Object.assign({}, defaultForm, {\r\n          billDate: this.$utils.getNowDay()\r\n        });\r\n      } else {\r\n        this.getDetails(this.formData.id);\r\n      }\r\n      if (this.pageType == \"details\") {\r\n        if (!this.isWorkFlowEdit) {\r\n          this.formConfig.itemArr.map(i => (i.disabled = true));\r\n        }\r\n        this.attachSetting.sourceId = this.formData.id; //附件id \r\n\r\n      }\r\n      if (this.pageType == \"score\") {//评分\r\n        this.scoreSetting.sourceId = this.formData.id; \r\n        this.formConfig.itemArr.map(i => (i.disabled = true));\r\n        this.showScore = true;//显示评分\r\n      }\r\n    },\r\n\r\n    //获取详情\r\n    async getDetails(id) {\r\n      let res = await getDetailsApi(id);\r\n      let obj = res.data || {};\r\n      this.procInstType = obj.procInstType;//附件页面标识\r\n      this.attachSetting.sourceId = obj.id;//附件对应的流程ID，新建流程保存后即可添加附件\r\n      this.editFormData = Object.assign({}, obj, {\r\n        confirmMan: obj.empId,\r\n        confirmManName: obj.zystaffunName\r\n      });\r\n    },\r\n        //提交前检测\r\n    submitBefore(data) {\r\n      //如果是起草节点\r\n      if (this.isWorkFlowEdit) {\r\n        return new Promise((resolve, reject) => {\r\n          this.$refs.editForm\r\n            .getFormData()\r\n            .then((data) => {\r\n              this.$set(data, \"submitType\", 1);\r\n              // console.log(data);\r\n              this.editFormData = Object.assign({}, data);\r\n              \r\n              updateApi(data)\r\n                .then((res) => {\r\n                  resolve();\r\n                })\r\n                .catch((e) => {\r\n                  reject(e);\r\n                });\r\n            })\r\n            .catch((e) => {\r\n              console.log(e)\r\n              reject(\"表单信息未填写完整\");\r\n            });\r\n        });\r\n      } else {\r\n        return true;\r\n      }\r\n    },\r\n    //工作流提交成功之后\r\n    workFlowSuccess() {\r\n      this.$emit(\"update:pageType\", \"list\");\r\n    },\r\n    //获取表单数据\r\n    getFormData() {\r\n      return this.$refs.editForm.getFormData();\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./add.vue?vue&type=template&id=6245fea8&scoped=true&\"\nimport script from \"./add.vue?vue&type=script&lang=js&\"\nexport * from \"./add.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6245fea8\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/request/api'\r\n/**===========基本信息接口 */\r\n//列表\r\nexport function getListApi(data = {}) {\r\n    return request({\r\n        url: '/workorder/AccountappAction/queryList.htm',\r\n        method: 'post',\r\n        data: data\r\n    })\r\n}\r\n//详情\r\nexport function getDetailsApi(id = \"\") {\r\n    return request({\r\n        url: '/workorder/AccountappAction/detail.htm',\r\n        method: 'post',\r\n        params:{ id: id }\r\n    })\r\n}\r\n\r\n//删除\r\nexport function deleteApi(id = \"\") {\r\n    return request({\r\n        url: '/workorder/AccountappAction/delete.htm',\r\n        method: 'post',\r\n        params: { id: id }\r\n    })\r\n}\r\n//添加\r\nexport function addApi(data = {}) {\r\n    return request({\r\n        url: '/workorder/AccountappAction/addAccountapp.htm',\r\n        method: 'post',\r\n        data: data\r\n    })\r\n}\r\n//保存草稿\r\nexport function updateApi(data = {}) {\r\n    return request({\r\n        url: '/workorder/AccountappAction/updateAccountapp.htm',\r\n        method: 'post',\r\n        data: data\r\n    })\r\n}\r\n\r\n\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"usersApply h100\"},[_c('div',{staticClass:\"page-main-box\"},[_c('KlTable',_vm._b({directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.pageType == 'list'),expression:\"pageType == 'list'\"}],ref:\"klTable\"},'KlTable',_vm.tableConfig,false)),(_vm.pageType !== 'list')?_c('editPage',{attrs:{\"rightBtnArr\":_vm.rightBtnArr},on:{\"goBackPage\":_vm.goBackPage}},[_c('addInfo',{ref:\"editForm\",attrs:{\"pageType\":_vm.pageType,\"formData\":_vm.formData},on:{\"update:pageType\":function($event){_vm.pageType=$event},\"update:page-type\":function($event){_vm.pageType=$event}}})],1):_vm._e()],1),_c('dialogPublic',{attrs:{\"title\":\"选择采购人\",\"show\":_vm.showMember,\"appendTobody\":\"\",\"width\":\"800px\",\"height\":\"400px\"},on:{\"update:show\":function($event){_vm.showMember=$event},\"doSubmit\":_vm.chooseUser,\"doClose\":function () { return (_vm.showMember = false); }}},[(_vm.showMember)?_c('orgMemberSelect',{ref:\"orgMemberSelect\",attrs:{\"seleteSetting\":_vm.orgMemberSelect,\"otherInfo\":_vm.otherInfo}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"usersApply h100\">\r\n    <!-- <publicCrumbs :crumbsData=\"crumbsData\"></publicCrumbs> -->\r\n    <div class=\"page-main-box\">\r\n      <KlTable\r\n        v-bind=\"tableConfig\"\r\n        v-show=\"pageType == 'list'\"\r\n        ref=\"klTable\"\r\n      ></KlTable>\r\n      <editPage\r\n        v-if=\"pageType !== 'list'\"\r\n        @goBackPage=\"goBackPage\"\r\n        :rightBtnArr=\"rightBtnArr\"\r\n      >\r\n        <addInfo\r\n          ref=\"editForm\"\r\n          :pageType.sync=\"pageType\"\r\n          :formData=\"formData\"\r\n        ></addInfo>\r\n      </editPage>\r\n    </div>\r\n    <dialogPublic\r\n      title=\"选择采购人\"\r\n      :show.sync=\"showMember\"\r\n      @doSubmit=\"chooseUser\"\r\n      @doClose=\"() => (showMember = false)\"\r\n      appendTobody\r\n      width=\"800px\"\r\n      height=\"400px\"\r\n    >\r\n      <orgMemberSelect\r\n        ref=\"orgMemberSelect\"\r\n        v-if=\"showMember\"\r\n        :seleteSetting=\"orgMemberSelect\"\r\n        :otherInfo=\"otherInfo\"\r\n      ></orgMemberSelect>\r\n    </dialogPublic>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport addInfo from \"./add\";\r\nimport {\r\n  getListApi, //获取列表\r\n  deleteApi, //删除\r\n  addApi, //添加\r\n  updateApi //编辑\r\n  // updateRegist,//修改\r\n  // addPortion//分配\r\n} from \"@/api/itService/usersApply\";\r\nimport { queryAssetTypeList } from \"@/api/common\";\r\n\r\nexport default {\r\n  name: \"usersApply\",\r\n  components: { addInfo },\r\n  data() {\r\n    return {\r\n      label: \"\",\r\n      otherInfo: \"\",\r\n      showMember: false,\r\n      showScore: false,\r\n      currentItem: {},\r\n      orgMemberSelect: {},\r\n      tableConfig: {\r\n        showFixedHeight: true,\r\n        searchObj: {\r\n          searchMethod: (params, that) => {\r\n            if (this.tableConfig.tableDataObj) {\r\n              this.getTableData();\r\n            } else {\r\n            }\r\n          },\r\n          searchArr: [\r\n            {\r\n              type: \"daterange\",\r\n              label: \"申请日期\",\r\n              model: \"billDate\"\r\n            },\r\n            {\r\n              type: \"el-input\",\r\n              label: \"服务单号\",\r\n              model: \"orderNo\",\r\n              placeholder: \"服务单号\"\r\n            },\r\n\r\n            // {\r\n            //   type: \"date\",\r\n            //   label: \"开始日期\",\r\n            //   model: \"beginDate\"\r\n            // },\r\n            // {\r\n            //   type: \"date\",\r\n            //   label: \"结束日期\",\r\n            //   model: \"endDate\"\r\n            // },\r\n            {\r\n              type: \"el-input\",\r\n              label: \"申请人\",\r\n              model: \"staffunName\",\r\n              placeholder: \"申请人\"\r\n            }\r\n            // {\r\n            //   type: \"el-input\",\r\n            //   label: \"申请人\",\r\n            //   model: \"staffunName\",\r\n            //   id: \"empId\",\r\n            //   scopeType: \"formate\",\r\n            //   method: row => {\r\n            //     this.chooseStaff(\"user\");\r\n            //   },\r\n            //   placeholder: \"申请人\"\r\n            // }\r\n          ]\r\n        },\r\n        // 查询条件参数\r\n        queryObj: {\r\n          method: () => {\r\n            this.getTableData();\r\n          },\r\n          queryData: {\r\n            page: 1,\r\n            pageSize: 15 //pageCount\r\n          }\r\n        },\r\n        tableDataObj: {\r\n          tableArr: [],\r\n          total: null\r\n        },\r\n        operateArr: [\r\n          {\r\n            name: \"新建\",\r\n            // isHide: !this.$store.getters[\"isBtnAuth\"](\"insert\"),\r\n            icon: \"el-icon-plus\",\r\n            method: name => {\r\n              this.toAdd();\r\n            }\r\n          }\r\n          // {\r\n          //   name: \"导出\",\r\n          //   icon: \"el-icon-download\",\r\n          //   // isHide: !this.$store.getters[\"isBtnAuth\"](\"export\"),\r\n          //   method: name => {\r\n          //     this.toExport();\r\n          //   }\r\n          // }\r\n        ],\r\n        //  table表配置参数\r\n        tableObj: {\r\n          // 左边选择框展示\r\n          selectionShow: false,\r\n          // 左边序号展示\r\n          indexShow: true,\r\n          // table表事件参数配置\r\n          tableMethods: {\r\n            selection: val => {\r\n              this.selectionData = val;\r\n            }\r\n          },\r\n          // table表展示列配置\r\n          showItems: [\r\n            {\r\n              name: \"服务单号\",\r\n              prop: \"orderNo\",\r\n              width: 100\r\n              // align: \"left\",\r\n            },\r\n            {\r\n              name: \"申请日期\",\r\n              prop: \"billDate\"\r\n            },\r\n            {\r\n              name: \"申请人\",\r\n              prop: \"staffunName\"\r\n            },\r\n            {\r\n              name: \"申请部门\",\r\n              prop: \"depatName\",\r\n              id: \"depatCode\"\r\n              // width: 100,\r\n            },\r\n            {\r\n              name: \"联系号码\",\r\n              prop: \"phone\"\r\n            },\r\n            {\r\n              name: \"申请类型\",\r\n              prop: \"apptype\",\r\n              id: \"apptype\",\r\n              scopeType: \"formate\",\r\n              method: row => {\r\n                let value = row.apptype;\r\n                return (\r\n                  this.$store.getters[\"fineDirtDataName\"](\"acc_type\", value) ||\r\n                  value\r\n                );\r\n              }\r\n              // width: 70\r\n            },\r\n            {\r\n              name: \"业务类型\",\r\n              prop: \"appsysName\",\r\n              id: \"appsysId\"\r\n            },\r\n            {\r\n              name: \"申请描述\",\r\n              prop: \"appContent\"\r\n              // width: 150\r\n              // align: \"left\"\r\n            },\r\n            {\r\n              name: \"备注\",\r\n              prop: \"remark\"\r\n            },\r\n            {\r\n              name: \"审批人\",\r\n              prop: \"auditorName\",\r\n              id: \"auditor\"\r\n              // width: 150\r\n              // align: \"left\"\r\n            },\r\n            {\r\n              name: \"流程节点\",\r\n              prop: \"stage\"\r\n            },\r\n            {\r\n              name: \"流程状态\",\r\n              prop: \"flowStatusName\",\r\n              id: \"status\"\r\n            },\r\n            {\r\n              name: \"操作\",\r\n              prop: \"operate\",\r\n              width: 150,\r\n              scopeType: \"button\",\r\n              fixed: \"right\",\r\n              buttonArr: [\r\n                // 最后一行操作栏数组\r\n                {\r\n                  name: \"详情\",\r\n                  method: row => {\r\n                    this.detailsInfo(row);\r\n                  },\r\n                  isShow: (row, that) => {\r\n                    return true;\r\n                  },\r\n                  icon: \"false\"\r\n                },\r\n                {\r\n                  name: \"审批\",\r\n                  method: row => {\r\n                    //0不可以审核 1可审核\r\n                    this.detailsInfo(row);\r\n                  },\r\n                  isShow: (row, that) => {\r\n                    return row.workflowIsApprover;\r\n                  },\r\n                  icon: \"false\"\r\n                },\r\n                {\r\n                  name: \"编辑\",\r\n                  method: row => {\r\n                    this.editInfo(row);\r\n                  },\r\n                  isShow: (row, that) => {\r\n                    return row.status === 2;\r\n                  },\r\n                  icon: \"false\"\r\n                },\r\n                {\r\n                  name: \"评分\",\r\n                  method: row => {\r\n                    this.score(row);\r\n                  },\r\n                  isShow: (row, that) => {\r\n                    // return true;\r\n                    return row.status === 1;\r\n                  },\r\n                  icon: \"false\"\r\n                },\r\n                {\r\n                  name: \"删除\",\r\n                  method: row => {\r\n                    this.deleteInfo(row);\r\n                  },\r\n                  isShow: (row, that) => {\r\n                    // return true;\r\n                    return row.status === 2;\r\n                  },\r\n                  icon: \"false\"\r\n                }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        // 分页展示总条配置\r\n        paginationObj: {\r\n          pageSizes: [15, 30, 50, 100]\r\n        },\r\n        paginationIsshow: true,\r\n        showklTable: false\r\n      },\r\n      pageType: \"list\",\r\n      formData: {}\r\n    };\r\n  },\r\n  computed: {\r\n    rightBtnArr() {\r\n      let arr = [\r\n        {\r\n          text: \"保存\",\r\n          icon: \"el-icon-check\",\r\n          hide: this.pageType == \"details\",\r\n          methods: () => {\r\n            this.doSubmit(2);\r\n          }\r\n        },\r\n        {\r\n          text: \"提交\",\r\n          icon: \"el-icon-finished\",\r\n          hide: this.pageType == \"details\",\r\n          methods: () => {\r\n            this.doSubmit(1);\r\n          }\r\n        }\r\n      ];\r\n      return arr;\r\n    }\r\n  },\r\n  watch: {\r\n    // 对人员选择框做清空处理\r\n    \"tableConfig.queryObj.queryData.staffunName\"(val) {\r\n      if (val == \"\") {\r\n        this.tableConfig.queryObj.queryData.empId = null;\r\n      }\r\n    },\r\n    pageType(val) {\r\n      if (val === \"list\") {\r\n        this.getTableData();\r\n      }\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.getTableData();\r\n    // console.log(this.$store.getters.systemType);\r\n  },\r\n  methods: {\r\n    //新建\r\n    toAdd() {\r\n      this.pageType = \"add\";\r\n      this.formData = {};\r\n    },\r\n    //查询数据\r\n    getTableData() {\r\n      let form = Object.assign({}, this.tableConfig.queryObj.queryData);\r\n      form.pageCount = form.pageSize;\r\n      //日期处理\r\n      let { billDate } = form;\r\n      if (billDate) {\r\n        let [beginDate, endDate] = billDate;\r\n        form.beginDate = beginDate;\r\n        form.endDate = endDate;\r\n      }\r\n      this.$delete(form, \"billDate\");\r\n      this.$delete(form, \"pageSize\");\r\n      this.$delete(form, \"empId\");\r\n      getListApi(form)\r\n        .then(res => {\r\n          this.$set(\r\n            this.tableConfig.tableDataObj,\r\n            \"tableArr\",\r\n            res.data.list || []\r\n          );\r\n          this.$set(\r\n            this.tableConfig.tableDataObj,\r\n            \"total\",\r\n            res.data.total || 0\r\n          );\r\n        })\r\n        .catch(res => {\r\n          this.$set(this.tableConfig.tableDataObj, \"tableArr\", []);\r\n          this.$set(this.tableConfig.tableDataObj, \"total\", 0);\r\n        });\r\n    },\r\n    //选择组织人员\r\n    chooseStaff(type) {\r\n      //对类型进行判断\r\n      let typePre = type.split(\"-\")[0]; //分割type\r\n      let typeBre = type.split(\"-\")[1];\r\n      if (typePre == \"dept\") {\r\n        //组织选择\r\n        this.orgMemberSelect = {\r\n          seleteType: typeBre ? typeBre : \"org\",\r\n          radio: typePre == \"dept\", //单选\r\n          props: {\r\n            label: \"organizationName\",\r\n            children: \"children\"\r\n          },\r\n          column: [\r\n            {\r\n              label: \"组织\",\r\n              prop: \"name\"\r\n            }\r\n          ],\r\n          chosedData: []\r\n        };\r\n      } else if (typePre == \"user\") {\r\n        //人员选择\r\n        this.orgMemberSelect = {\r\n          seleteType: typeBre ? typeBre : \"orgmember\",\r\n          radio: typePre == \"user\", //单选\r\n          props: {\r\n            label: \"organizationName\",\r\n            children: \"children\"\r\n          },\r\n          column: [\r\n            {\r\n              label: \"姓名\",\r\n              prop: \"name\",\r\n              width: 60\r\n            }\r\n          ],\r\n          chosedData: []\r\n        };\r\n      }\r\n      this.showMember = true;\r\n    },\r\n\r\n    //确定选择人员\r\n    chooseUser() {\r\n      let data = this.$refs.orgMemberSelect.getSeleteData();\r\n      let newData = data[0];\r\n      let names = \"\";\r\n      let ids = \"\";\r\n      if (newData) {\r\n        this.$set(\r\n          this.tableConfig.queryObj.queryData,\r\n          \"staffunName\",\r\n          newData.name\r\n        );\r\n        this.$set(this.tableConfig.queryObj.queryData, \"empId\", newData.id);\r\n      }\r\n      this.showMember = false;\r\n    },\r\n\r\n    //分配\r\n    addDistribution(data) {\r\n      return new Promise((resolve, reject) => {\r\n        addPortion(data)\r\n          .then(res => {\r\n            resolve(res);\r\n          })\r\n          .catch(e => {\r\n            console.log(e);\r\n            reject(e);\r\n          });\r\n      });\r\n    },\r\n\r\n    //确定新增\r\n    addSeleteMember() {\r\n      let $Vue = this.$Vue;\r\n      let data = this.selections;\r\n      $Vue.$refs[\"tabs\" + this.tabname][0].setTableData(data);\r\n      this.showMember = false;\r\n    },\r\n    //详情\r\n    detailsInfo(row) {\r\n      this.pageType = \"details\";\r\n      this.formData = Object.assign({}, row);\r\n    },\r\n    //编辑\r\n    editInfo(row) {\r\n      this.pageType = \"edit\";\r\n      this.formData = Object.assign({}, row);\r\n    },\r\n    score(row) {\r\n      this.pageType = \"score\";\r\n      this.formData = Object.assign({}, row);\r\n    },\r\n\r\n    //删除\r\n    deleteInfo(row) {\r\n      this.$confirm(`是否确认删除`, \"提示\", {\r\n        // this.$confirm(`是否删除【${row.trainingName}】`, \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      })\r\n        .then(() => {\r\n          deleteApi(row.id).then(res => {\r\n            this.$message.success(\"操作成功\");\r\n            this.getTableData();\r\n          });\r\n        })\r\n        .catch(e => {});\r\n    },\r\n    //点击提交\r\n    doSubmit(submitType) {\r\n      this.$refs.editForm\r\n        .getFormData()\r\n        .then(data => {\r\n          this.$set(data, \"submitType\", submitType);\r\n          this.$delete(data, \"confirmManName\");\r\n          const actionApi = queryData => {\r\n            //addApi\r\n            return queryData.id ? updateApi(queryData) : addApi(queryData);\r\n          };\r\n          if (submitType == \"2\" || (submitType == \"1\" && data.confirmMan)) {\r\n            actionApi(data).then(res => {\r\n              this.$message.success(\"操作成功！\");\r\n              if (submitType == 2) {\r\n                this.pageType = \"edit\";\r\n                if (res.data) {\r\n                  this.formData.id = res.data;\r\n                }\r\n                this.$refs.editForm.getDetails(this.formData.id);\r\n              } else {\r\n                this.pageType = \"list\";\r\n              }\r\n            });\r\n          } else {\r\n            this.$message.warning(\"请选择审批人！\");\r\n          }\r\n        })\r\n        .catch(e => {\r\n          console.log(e);\r\n        });\r\n    },\r\n    //新增\r\n    addMethons(data) {\r\n      // this.$delete(data, 'staffunName');//删除采购人名字\r\n      // this.$delete(data, 'overQty');//新建以及编辑的时候不传分配数量\r\n      if (data.id) {\r\n        //有ID则为修改\r\n        return new Promise((resolve, reject) => {\r\n          updateRegist(data)\r\n            .then(res => {\r\n              resolve(res);\r\n            })\r\n            .catch(e => {\r\n              console.log(e);\r\n              reject(e);\r\n            });\r\n        });\r\n      } else {\r\n        //新增\r\n        return new Promise((resolve, reject) => {\r\n          addApi(data)\r\n            .then(res => {\r\n              resolve(res);\r\n            })\r\n            .catch(e => {\r\n              console.log(e);\r\n              reject(e);\r\n            });\r\n        });\r\n      }\r\n    },\r\n    //返回\r\n    goBackPage(data) {\r\n      this.pageType = \"list\";\r\n    },\r\n    /**导出 */\r\n    toExport() {\r\n      let baseUrl = process.env.BASEURL;\r\n      let params = \"\";\r\n      let form = Object.assign({}, this.tableConfig.queryObj.queryData);\r\n      if (form.daterange) {\r\n        form.comeinStart = form.daterange[0] || \"\";\r\n        form.comeinEnd = form.daterange[1] || \"\";\r\n        delete form.daterange;\r\n      }\r\n      for (const key in form) {\r\n        params += `${key}=${form[key]}&`;\r\n      }\r\n\r\n      params = params.substring(0, params.length - 1);\r\n      let url = `${baseUrl}/trainRecord/exportAdmUnPass.htm?${params}`;\r\n      window.open(url);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=b330ec66&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}